{"id":"mI8B9Y8fjtX0vSVe","meta":{"instanceId":"f6e8ad6763839b50a3ab3bea5512dc60976f81a6273178925f946fc7a00549a8"},"name":"Automated Tenant Complaint Management and Escalation System","tags":[],"nodes":[{"id":"e7803f9e-3893-4a98-9ad0-ac9f97c167df","name":"Tenant Complaint Webhook","type":"n8n-nodes-base.webhook","position":[0,192],"webhookId":"e9ff2112-f47f-4eac-9ba7-dc2a5150953e","parameters":{"path":"tenant-complaint","options":{},"httpMethod":"POST","responseMode":"lastNode"},"typeVersion":2.1},{"id":"1d47e086-774b-4f56-8ed9-23548a3aefb0","name":"Workflow Configuration","type":"n8n-nodes-base.set","position":[224,192],"parameters":{"options":{},"assignments":{"assignments":[{"id":"id-1","name":"slackChannel","type":"string","value":"<__PLACEHOLDER_VALUE__Slack channel ID for property manager notifications__>"},{"id":"id-2","name":"propertyManagerEmail","type":"string","value":"<__PLACEHOLDER_VALUE__Property manager email address__>"},{"id":"id-3","name":"googleSheetId","type":"string","value":"<__PLACEHOLDER_VALUE__Google Sheets document ID__>"},{"id":"id-4","name":"googleSheetName","type":"string","value":"<__PLACEHOLDER_VALUE__Sheet name (e.g., Complaints Log)__>"}]},"includeOtherFields":true},"typeVersion":3.4},{"id":"151af8c3-fbc7-41a3-b34c-a7f9631530e2","name":"Normalize Complaint Data","type":"n8n-nodes-base.set","position":[448,192],"parameters":{"options":{},"assignments":{"assignments":[{"id":"id-1","name":"tenantName","type":"string","value":"={{ $json.body.name }}"},{"id":"id-2","name":"unit","type":"string","value":"={{ $json.body.unit }}"},{"id":"id-3","name":"complaintType","type":"string","value":"={{ $json.body.complaintType }}"},{"id":"id-4","name":"description","type":"string","value":"={{ $json.body.description }}"},{"id":"id-5","name":"timestamp","type":"string","value":"={{ $json.body.timestamp || $now.toISO() }}"},{"id":"id-6","name":"tenantEmail","type":"string","value":"={{ $json.body.email }}"}]},"includeOtherFields":true},"typeVersion":3.4},{"id":"ee50ef44-97c7-4021-a565-7e680e62aa6b","name":"AI Complaint Classifier","type":"@n8n/n8n-nodes-langchain.agent","position":[672,192],"parameters":{"text":"=Tenant: {{ $json.tenantName }}\nUnit: {{ $json.unit }}\nComplaint Type: {{ $json.complaintType }}\nDescription: {{ $json.description }}","options":{"systemMessage":"You are a property management AI assistant that classifies tenant complaints.\n\nYour task is to:\n1. Analyze the complaint details provided\n2. Classify the urgency level as: High, Medium, or Low\n3. Categorize the complaint type as: Maintenance, Noise, Neighbor, Safety, Billing, or Other\n\nUrgency Classification Rules:\n- High: Safety hazards, water leaks, heating/cooling failures, security issues, or anything requiring immediate attention\n- Medium: Non-emergency maintenance, persistent noise issues, neighbor disputes requiring intervention\n- Low: Minor maintenance requests, general inquiries, cosmetic issues\n\nReturn your response in this exact format:\nUrgency: [High/Medium/Low]\nCategory: [Maintenance/Noise/Neighbor/Safety/Billing/Other]\nReason: [Brief explanation of your classification]"},"promptType":"define"},"typeVersion":3},{"id":"4e64cdd8-24cc-45b0-b2c5-72e0ed5455f4","name":"OpenAI Chat Model","type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","position":[744,416],"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4.1-mini"},"options":{},"builtInTools":{}},"credentials":{"openAiApi":{"id":"HTy8dVDHzRHtxXLm","name":"n8n free OpenAI API credits"}},"typeVersion":1.3},{"id":"9b03497a-106c-41a3-b29b-4f6b2d7627e4","name":"Route by Urgency","type":"n8n-nodes-base.switch","position":[1024,176],"parameters":{"rules":{"values":[{"outputKey":"High","conditions":{"options":{"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"combinator":"and","conditions":[{"operator":{"type":"string","operation":"contains"},"leftValue":"={{ $json }}","rightValue":"Urgency: High"}]},"renameOutput":true},{"outputKey":"Medium","conditions":{"options":{"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"combinator":"and","conditions":[{"operator":{"type":"string","operation":"contains"},"leftValue":"={{ $json }}","rightValue":"Urgency: Medium"}]},"renameOutput":true},{"outputKey":"Low","conditions":{"options":{"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"combinator":"and","conditions":[{"operator":{"type":"string","operation":"contains"},"leftValue":"={{ $json }}","rightValue":"Urgency: Low"}]},"renameOutput":true}]},"options":{}},"typeVersion":3.3},{"id":"48c08e34-1810-44c0-862f-8f0aca753b4d","name":"Notify Property Manager (High Priority)","type":"n8n-nodes-base.slack","position":[1600,192],"webhookId":"7b5601df-88e6-4920-95b8-89a424cb17d1","parameters":{"text":"=ðŸš¨ *HIGH PRIORITY COMPLAINT*\n\n*Tenant:* {{ $json.tenantName }}\n*Unit:* {{ $json.unit }}\n*Type:* {{ $json.complaintType }}\n*Timestamp:* {{ $json.timestamp }}\n\n*Description:*\n{{ $json.description }}\n\n*AI Classification:*\n{{ $json.output }}\n\n_Immediate action required._","select":"channel","channelId":{"__rl":true,"mode":"id","value":"={{ $('Workflow Configuration').first().json.slackChannel }}"},"otherOptions":{}},"typeVersion":2.3},{"id":"e4236e6f-6a10-4b9a-b994-3e54ee7eaa22","name":"AI Email Generator","type":"@n8n/n8n-nodes-langchain.agent","position":[1248,440],"parameters":{"text":"=Tenant Name: {{ $json.tenantName }}\nUnit: {{ $json.unit }}\nComplaint Type: {{ $json.complaintType }}\nDescription: {{ $json.description }}\nUrgency: {{ $json.output }}","options":{"systemMessage":"You are a professional property management assistant that generates personalized acknowledgment emails for tenant complaints.\n\nYour task is to:\n1. Create a warm, professional email acknowledging the tenant's complaint\n2. Reference specific details from their complaint to show you've read it carefully\n3. Set appropriate expectations based on urgency level\n4. Provide reassurance and next steps\n5. Include contact information for follow-up\n\nEmail Guidelines:\n- Use a friendly but professional tone\n- Acknowledge the specific issue mentioned\n- For High urgency: Emphasize immediate action and provide emergency contact\n- For Medium urgency: Provide timeline for review (24-48 hours)\n- For Low urgency: Acknowledge receipt and provide general timeline\n- Always thank them for reporting the issue\n- Sign off as \"Property Management Team\"\n\nReturn ONLY the email body text (no subject line, no HTML tags)."},"promptType":"define"},"typeVersion":3},{"id":"11940f7a-9fc6-42cc-bbc2-2c6825ef9184","name":"OpenAI Chat Model for Email","type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","position":[1320,664],"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4.1-mini"},"options":{},"builtInTools":{}},"credentials":{"openAiApi":{"id":"HTy8dVDHzRHtxXLm","name":"n8n free OpenAI API credits"}},"typeVersion":1.3},{"id":"20ecefdc-fe97-4217-89ae-bbb9e6e1f15f","name":"Send Acknowledgment Email","type":"n8n-nodes-base.emailSend","position":[1600,440],"webhookId":"81f1929e-f40e-4914-b658-80c45149e84d","parameters":{"text":"={{ $json.output }}","options":{},"subject":"=Complaint Acknowledgment - Unit {{ $json.unit }}","toEmail":"={{ $json.tenantEmail }}","fromEmail":"={{ $('Workflow Configuration').first().json.propertyManagerEmail }}","emailFormat":"text"},"typeVersion":2.1},{"id":"d2c9c9d1-f494-4e78-8cbb-58ff817028ae","name":"Create Task Data (Medium Priority)","type":"n8n-nodes-base.set","position":[1312,48],"parameters":{"options":{},"assignments":{"assignments":[{"id":"id-1","name":"taskTitle","type":"string","value":"=Review Complaint - Unit {{ $json.unit }}"},{"id":"id-2","name":"taskDescription","type":"string","value":"=Tenant: {{ $json.tenantName }}\nComplaint: {{ $json.description }}\nClassification: {{ $json.output }}"},{"id":"id-3","name":"taskPriority","type":"string","value":"Medium"},{"id":"id-4","name":"taskStatus","type":"string","value":"Pending Review"},{"id":"id-5","name":"taskDueDate","type":"string","value":"={{ $now.plus(2, 'days').toISO() }}"}]},"includeOtherFields":true},"typeVersion":3.4},{"id":"7429eebe-fd60-4cc4-b3ed-51fd78558955","name":"Consolidate All Branches","type":"n8n-nodes-base.merge","position":[1824,316],"parameters":{"mode":"combine","options":{},"combineBy":"combineAll"},"typeVersion":3.2},{"id":"5a2d467a-0d73-489a-840b-814263cce37a","name":"Log to Google Sheets","type":"n8n-nodes-base.googleSheets","position":[2048,316],"parameters":{"columns":{"value":{"Unit":"={{ $json.unit }}","Status":"Logged","Urgency":"={{ $json.output }}","Timestamp":"={{ $json.timestamp }}","Description":"={{ $json.description }}","Tenant Name":"={{ $json.tenantName }}","Complaint Type":"={{ $json.complaintType }}"},"schema":[{"id":"Timestamp","required":false,"displayName":"Timestamp","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Tenant Name","required":false,"displayName":"Tenant Name","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Unit","required":false,"displayName":"Unit","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Complaint Type","required":false,"displayName":"Complaint Type","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Description","required":false,"displayName":"Description","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Urgency","required":false,"displayName":"Urgency","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Status","required":false,"displayName":"Status","defaultMatch":false,"canBeUsedToMatch":true}],"mappingMode":"defineBelow","matchingColumns":["Timestamp"]},"options":{},"operation":"appendOrUpdate","sheetName":{"__rl":true,"mode":"name","value":"={{ $('Workflow Configuration').first().json.googleSheetName }}"},"documentId":{"__rl":true,"mode":"id","value":"={{ $('Workflow Configuration').first().json.googleSheetId }}"}},"credentials":{"googleSheetsOAuth2Api":{"id":"5b6oIAuqcO9HRb2A","name":"Google Sheets account 3"}},"typeVersion":4.7},{"id":"80c9eca2-76af-42db-9c5e-9a5668ca71d7","name":"AI Resolution Suggester","type":"@n8n/n8n-nodes-langchain.agent","position":[2272,316],"parameters":{"text":"=Complaint Type: {{ $json.complaintType }}\nDescription: {{ $json.description }}\nUrgency: {{ $json.output }}\nUnit: {{ $json.unit }}","options":{"systemMessage":"You are an experienced property management advisor that provides actionable resolution steps for tenant complaints.\n\nYour task is to:\n1. Analyze the complaint details and classification\n2. Suggest 3-5 specific, actionable resolution steps\n3. Prioritize steps based on urgency and impact\n4. Include estimated timeframes for each step\n5. Mention any resources or vendors that might be needed\n6. Highlight any preventive measures for the future\n\nProvide practical, realistic recommendations that property managers can immediately act upon.\n\nFormat your response as:\n**Recommended Resolution Steps:**\n1. [Step with timeframe]\n2. [Step with timeframe]\n...\n\n**Resources Needed:**\n- [List any vendors, materials, or personnel]\n\n**Prevention Tips:**\n- [Future preventive measures]"},"promptType":"define"},"typeVersion":3},{"id":"128f4c30-b13d-4142-9708-a4b0e151b98e","name":"OpenAI Chat Model for Resolutions","type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","position":[2344,540],"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4.1-mini"},"options":{},"builtInTools":{}},"credentials":{"openAiApi":{"id":"HTy8dVDHzRHtxXLm","name":"n8n free OpenAI API credits"}},"typeVersion":1.3},{"id":"50afe0b1-2eb3-45d2-9e4b-8b799be240a0","name":"Sticky Note","type":"n8n-nodes-base.stickyNote","position":[-416,-96],"parameters":{"width":352,"height":576,"content":"## Main\n\nThis workflow automatically triages tenant complaints using AI and routes high-priority issues to property managers immediately while logging all complaints for reporting. Medium and low-priority issues are acknowledged and scheduled for follow-up. This helps property management teams respond quickly, maintain tenant satisfaction, and prevent missed complaints.\n\n## Setup\n\n1. Connect your form or tenant portal to the Webhook trigger.\n2. Add credentials for Slack, Email, Google Sheets, and AI.\n3. Customize AI classification prompts to match your complaint categories.\n4. Test each routing path (High / Medium / Low) before going live.\n5. Adjust task management or follow-up logic according to team workflow.\n"},"typeVersion":1},{"id":"ca4e8100-c6ab-4070-b49d-e11f24dbed5f","name":"Sticky Note1","type":"n8n-nodes-base.stickyNote","position":[-48,-96],"parameters":{"color":7,"width":464,"height":720,"content":"## Webhook Trigger "},"typeVersion":1},{"id":"4ca2b399-f7be-4e6d-bc54-dc701174beb7","name":"Sticky Note2","type":"n8n-nodes-base.stickyNote","position":[448,-96],"parameters":{"color":7,"width":512,"height":720,"content":"## AI logi"},"typeVersion":1},{"id":"539bd30d-2e7b-4f17-a2a7-2177dc385487","name":"Sticky Note3","type":"n8n-nodes-base.stickyNote","position":[992,-96],"parameters":{"color":7,"width":992,"height":976,"content":"## Classification and Routing"},"typeVersion":1},{"id":"f37d858b-5fb2-4f49-87da-5e8d85c027de","name":"Sticky Note4","type":"n8n-nodes-base.stickyNote","position":[2000,112],"parameters":{"color":7,"width":576,"height":720,"content":"## Log and Resolve"},"typeVersion":1}],"active":false,"pinData":{},"settings":{"executionOrder":"v1"},"versionId":"b2e6368a-f554-4bcf-a9b0-505de70904dc","connections":{"Route by Urgency":{"main":[[{"node":"Notify Property Manager (High Priority)","type":"main","index":0}],[{"node":"AI Email Generator","type":"main","index":0}],[{"node":"Create Task Data (Medium Priority)","type":"main","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"AI Complaint Classifier","type":"ai_languageModel","index":0}]]},"AI Email Generator":{"main":[[{"node":"Send Acknowledgment Email","type":"main","index":0}]]},"Log to Google Sheets":{"main":[[{"node":"AI Resolution Suggester","type":"main","index":0}]]},"Workflow Configuration":{"main":[[{"node":"Normalize Complaint Data","type":"main","index":0}]]},"AI Complaint Classifier":{"main":[[{"node":"Route by Urgency","type":"main","index":0}]]},"Consolidate All Branches":{"main":[[{"node":"Log to Google Sheets","type":"main","index":0}]]},"Normalize Complaint Data":{"main":[[{"node":"AI Complaint Classifier","type":"main","index":0}]]},"Tenant Complaint Webhook":{"main":[[{"node":"Workflow Configuration","type":"main","index":0}]]},"Send Acknowledgment Email":{"main":[[{"node":"Consolidate All Branches","type":"main","index":1}]]},"OpenAI Chat Model for Email":{"ai_languageModel":[[{"node":"AI Email Generator","type":"ai_languageModel","index":0}]]},"OpenAI Chat Model for Resolutions":{"ai_languageModel":[[{"node":"AI Resolution Suggester","type":"ai_languageModel","index":0}]]},"Notify Property Manager (High Priority)":{"main":[[{"node":"Consolidate All Branches","type":"main","index":0}]]}}}