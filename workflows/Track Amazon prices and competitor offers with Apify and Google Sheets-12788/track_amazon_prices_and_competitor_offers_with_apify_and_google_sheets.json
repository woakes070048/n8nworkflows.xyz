{"id":"Qd7meappsLBBgpHl","meta":{"instanceId":"a35e275f7a01c731f06dc9c5a3e3837872fe41be4a26c8693b8fd9ac7c67e650","templateId":"11062","templateCredsSetupCompleted":true},"name":"Track Amazon prices and monitor competitors","tags":[],"nodes":[{"id":"93168663-49d8-4533-9dc4-67a18844458c","name":"Schedule Trigger","type":"n8n-nodes-base.scheduleTrigger","position":[1360,464],"parameters":{"rule":{"interval":[{"triggerAtHour":8}]}},"typeVersion":1.2},{"id":"6662de5f-e9b6-4b15-970d-816c0bf5199c","name":"Get row(s) in sheet","type":"n8n-nodes-base.googleSheets","position":[1632,464],"parameters":{"options":{},"sheetName":{"__rl":true,"mode":"list","value":"gid=0","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1hr4e9y0z2LK0N8N7R5xgZjuH3nW_OU5AcOtew9H6NaM/edit#gid=0","cachedResultName":"Sheet1"},"documentId":{"__rl":true,"mode":"list","value":"1hr4e9y0z2LK0N8N7R5xgZjuH3nW_OU5AcOtew9H6NaM","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1hr4e9y0z2LK0N8N7R5xgZjuH3nW_OU5AcOtew9H6NaM/edit?usp=drivesdk","cachedResultName":"Untitled spreadsheet"}},"credentials":{"googleSheetsOAuth2Api":{"id":"xHJ5UTr4Jnb3It2H","name":"Google Sheets account 3"}},"typeVersion":4.7},{"id":"872aed3d-5d6a-426a-82bc-799b40724fee","name":"Loop Over Items","type":"n8n-nodes-base.splitInBatches","position":[1904,464],"parameters":{"options":{}},"typeVersion":3},{"id":"23197cee-867e-412c-9c49-bf1ace88ed2a","name":"Run an Actor","type":"@apify/n8n-nodes-apify.apify","onError":"continueRegularOutput","position":[2208,448],"parameters":{"actorId":{"__rl":true,"mode":"list","value":"BG3WDrGdteHgZgbPK","cachedResultUrl":"https://console.apify.com/actors/BG3WDrGdteHgZgbPK/input","cachedResultName":"Amazon Product Scraper (junglee/Amazon-crawler)"},"customBody":"={\n  \"categoryOrProductUrls\": [\n    {\n      \"url\": \"{{ $json['Amazon S3P (Revlon)'] }}\"\n    },\n    {\n      \"url\": \"{{ $json['Amazon P3P (RK)'] }}\"\n    }\n  ]\n}"},"credentials":{"apifyApi":{"id":"tPqeWH4e0gipGdzn","name":"Apify account 3"}},"typeVersion":1},{"id":"6baad89a-0e78-4077-85a1-9ef3584e2b41","name":"HTTP Request1","type":"n8n-nodes-base.httpRequest","onError":"continueRegularOutput","position":[2592,448],"parameters":{"url":"=https://api.apify.com/v2/datasets/{{ $json.defaultDatasetId }}/items?token={your_apify_api_YOUR_TOKEN_HERE}","options":{}},"typeVersion":4.2},{"id":"9a13d367-e11f-4b56-830e-39d399e742d7","name":"Append or update row in sheet","type":"n8n-nodes-base.googleSheets","position":[3344,464],"parameters":{"columns":{"value":{"RK Price":"={{ $json.rkPrice }}","Revlon Price":"={{ $json.revlonPrice }}","Material Name":"={{ $json.materialName }}"},"schema":[{"id":"Category Name","type":"string","display":true,"required":false,"displayName":"Category Name","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Material Name","type":"string","display":true,"removed":false,"required":false,"displayName":"Material Name","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Amazon S3P (Revlon)","type":"string","display":true,"required":false,"displayName":"Amazon S3P (Revlon)","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Revlon Price","type":"string","display":true,"required":false,"displayName":"Revlon Price","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Amazon P3P (RK)","type":"string","display":true,"required":false,"displayName":"Amazon P3P (RK)","defaultMatch":false,"canBeUsedToMatch":true},{"id":"RK Price","type":"string","display":true,"required":false,"displayName":"RK Price","defaultMatch":false,"canBeUsedToMatch":true}],"mappingMode":"defineBelow","matchingColumns":["Material Name"],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{},"operation":"appendOrUpdate","sheetName":{"__rl":true,"mode":"list","value":"gid=0","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1hr4e9y0z2LK0N8N7R5xgZjuH3nW_OU5AcOtew9H6NaM/edit#gid=0","cachedResultName":"Sheet1"},"documentId":{"__rl":true,"mode":"list","value":"1hr4e9y0z2LK0N8N7R5xgZjuH3nW_OU5AcOtew9H6NaM","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1hr4e9y0z2LK0N8N7R5xgZjuH3nW_OU5AcOtew9H6NaM/edit?usp=drivesdk","cachedResultName":"Amazon Price Update"}},"credentials":{"googleSheetsOAuth2Api":{"id":"xHJ5UTr4Jnb3It2H","name":"Google Sheets account 3"}},"typeVersion":4.7},{"id":"50053e6d-b69e-4c32-bc36-9f15c1dc1dcf","name":"Code in JavaScript","type":"n8n-nodes-base.code","onError":"continueRegularOutput","position":[2880,448],"parameters":{"jsCode":"// Get both product results\nconst items = $input.all();\n\n// Extract prices from both products\nconst price1 = items[0]?.json?.price?.value || items[0]?.json?.listPrice?.value || 'N/A';\nconst price2 = items[1]?.json?.price?.value || items[1]?.json?.listPrice?.value || 'N/A';\n\n// Get the original row data from Loop Over Items\nconst originalRow = $('Loop Over Items').item.json;\n\nreturn [{\n  json: {\n    rowNumber: originalRow.row_number,\n    MyListingPrice: price1,\n    OtherSellerPrice: price2,\n    categoryName: originalRow['Category Name'],\n    materialName: originalRow['Material Name'],\n    lastUpdated: new Date().toLocaleString('en-IN', { timeZone: 'Asia/Kolkata' })\n  }\n}];"},"typeVersion":2},{"id":"c2c8da3a-23b7-401f-a432-1facb40fdebd","name":"Sticky Note","type":"n8n-nodes-base.stickyNote","position":[1296,352],"parameters":{"color":6,"height":272,"content":"## Daily Auto Start"},"typeVersion":1},{"id":"f7741ff6-4c9f-49cb-971a-6e66c1720a31","name":"Sticky Note1","type":"n8n-nodes-base.stickyNote","position":[1568,352],"parameters":{"color":3,"height":272,"content":"## Fetch product row data from Sheet"},"typeVersion":1},{"id":"b546ef04-1c14-47f3-8128-c3030c1c563f","name":"Sticky Note2","type":"n8n-nodes-base.stickyNote","position":[1840,352],"parameters":{"color":6,"height":272,"content":"## Processing each row "},"typeVersion":1},{"id":"de832710-985d-4251-8166-44af95d8e890","name":"Sticky Note3","type":"n8n-nodes-base.stickyNote","position":[2112,352],"parameters":{"color":5,"width":304,"height":272,"content":"## Scrape and get Amazon data"},"typeVersion":1},{"id":"60448e00-c4b7-40da-86fa-4bf052241993","name":"Sticky Note4","type":"n8n-nodes-base.stickyNote","position":[2496,368],"parameters":{"color":2,"width":272,"height":256,"content":"## Fetch Apify output from actor"},"typeVersion":1},{"id":"b1766657-17ac-4bd6-abd2-4df0cfea3f63","name":"Sticky Note5","type":"n8n-nodes-base.stickyNote","position":[2800,368],"parameters":{"color":4,"width":288,"height":256,"content":"## Extract price data By Code Node"},"typeVersion":1},{"id":"0a1eec58-4e4e-4a34-a5bb-8777d28dc95f","name":"Sticky Note6","type":"n8n-nodes-base.stickyNote","position":[3152,368],"parameters":{"color":3,"width":448,"height":240,"content":"## Update data to sheet with final output"},"typeVersion":1},{"id":"107bb2ec-bd03-492b-96e9-769679c74471","name":"Sticky Note7","type":"n8n-nodes-base.stickyNote","position":[496,-304],"parameters":{"width":768,"height":928,"content":"# Track Amazon prices and monitor competitors\n\n\n## How It Works\n\n* This automation continuously monitors Amazon product prices and competitor listings, then syncs the latest data directly into Google Sheets.\n* It is built for Amazon sellers, founders, and growth teams who want automated price tracking, clear competitor visibility, and smarter pricing decisions without manual checking.\n* The system is fully scalable. You can add more products or competitors simply by extending columns and nodes.\n\n## Workflow Overview\n\n* Reads product and competitor URLs from Google Sheets\n* Processes each product in a loop\n* Scrapes Amazon listing data using Apify\n* Fetches structured results via HTTP\n* Formats price and offer data using a JavaScript node\n* Updates Google Sheets with fresh pricing data\n* Easily scales to multiple competitors per product\n\n## Setup Guide\n\n* Add product and competitor links to Google Sheets\n* Connect your Apify API token\n\n  * Note: The Amazon scraper requires a paid plan. A free trial is available.\n* Configure Google Sheets credentials in n8n\n* Set the Sheet ID and ranges inside the relevant nodes\n* Run the workflow once to confirm data accuracy\n* Expand anytime by mapping new competitor columns\n\n## Optional Enhancements\n\n* Automated price drop alerts\n* Buy Box ownership tracking\n* Slack or email notifications for critical changes\n* Large-scale competitor monitoring with minimal configuration changes\n\n\nNeed Help?\nConnect with me at faisalahmed1928@gmail.com"},"typeVersion":1}],"active":true,"pinData":{},"settings":{"executionOrder":"v1"},"versionId":"4f0b6a2a-6edb-4b3c-b221-60ace232913d","connections":{"Run an Actor":{"main":[[{"node":"HTTP Request1","type":"main","index":0}]]},"HTTP Request1":{"main":[[{"node":"Code in JavaScript","type":"main","index":0}]]},"Loop Over Items":{"main":[[],[{"node":"Run an Actor","type":"main","index":0}]]},"Schedule Trigger":{"main":[[{"node":"Get row(s) in sheet","type":"main","index":0}]]},"Code in JavaScript":{"main":[[{"node":"Append or update row in sheet","type":"main","index":0}]]},"Get row(s) in sheet":{"main":[[{"node":"Loop Over Items","type":"main","index":0}]]},"Append or update row in sheet":{"main":[[{"node":"Loop Over Items","type":"main","index":0}]]}}}