{"meta":{"instanceId":"6c118a8acfbd6c5a7401dc5bfa65b57bbe715feb57d00cd265fb540cc778096d"},"nodes":[{"id":"22b24165-589e-4cc0-b09d-fa8af191d8d4","name":"On form submission","type":"n8n-nodes-base.formTrigger","position":[-304,-2368],"webhookId":"53708210-0d1b-4225-a9fa-b02c3c9cf36d","parameters":{"options":{"path":"lead-qualifier","buttonLabel":"Process","appendAttribution":false},"formTitle":"Bad CSV - Good CSV","formFields":{"values":[{"fieldType":"file","fieldLabel":"CSV","requiredField":true,"acceptFileTypes":".csv, .xlsx"},{"fieldType":"dropdown","fieldLabel":"Save Into?","fieldOptions":{"values":[{"option":"Google Drive"},{"option":"WhatsApp"},{"option":"Google Sheets with Data Processing"}]},"requiredField":true},{"fieldType":"textarea","fieldLabel":"Email Personalization Prompt 1","requiredField":true},{"fieldType":"textarea","fieldLabel":"Email Personalization Prompt 2","requiredField":true}]}},"typeVersion":2.3},{"id":"cce6ae88-d9aa-4af4-84b7-a0ec91453d94","name":"Extract from File","type":"n8n-nodes-base.extractFromFile","position":[304,-2272],"parameters":{"options":{"enableBOM":true},"binaryPropertyName":"=data"},"typeVersion":1,"alwaysOutputData":false},{"id":"a94f7819-3850-473a-ac7c-ef5bd90c418c","name":"Code","type":"n8n-nodes-base.code","position":[-112,-2368],"parameters":{"jsCode":"const data = $input.last().json\nconst binaryData = $input.last().binary\n\nlet output = []\n\nObject.keys(binaryData).forEach( b => {\n  output.push({\n    json: data,\n    binary: { data: binaryData[b]}\n  })\n})\n\nreturn output"},"typeVersion":2},{"id":"6030179e-108c-4765-9f20-e7921c1caa60","name":"Convert to File","type":"n8n-nodes-base.convertToFile","position":[1072,-2912],"parameters":{"options":{}},"typeVersion":1.1},{"id":"03b67fcb-a436-40b3-9813-7b7532aeefcd","name":"Replace Value","type":"n8n-nodes-base.code","position":[512,-2272],"parameters":{"jsCode":"try {\n  const columnMappings = {\n    'Name': ['name', 'full name', 'full_name', 'FULL_NAME', 'FULLNAME', 'FullName'],\n\n    'First Name': ['FirstName', 'Firstname', 'firstname', 'FIRSTNAME', 'firstName', 'First_Name', 'first_name', 'FIRST_NAME', 'First-name', 'first-name', 'First name', 'first name', 'FIRST NAME', 'first_Name', 'First_name', 'first Name'],\n\n    'Last Name': ['Las_name', 'Lastname', 'lastname', 'LASTNAME', 'lastName', 'Last_Name', 'last_name', 'LAST_NAME', 'Last-Name', 'last-name', 'LAST-NAME', 'Last Name', 'last name', 'LAST NAME'],\n    \n    'Email': ['Email', 'email', 'EMAIL', 'E-mail', 'e-mail', 'E_mail', 'e_mail', 'E Mail', 'e mail', 'EmailAddress', 'emailaddress', 'EMAILADDRESS', 'Email_Address', 'email_address', 'EMAIL_ADDRESS', 'Email-Address', 'email-address', 'EMAIL-ADDRESS', 'Email Address', 'email address', 'EMAIL ADDRESS', 'EmailID', 'emailid', 'EMAILID', 'Email_ID', 'email_id', 'EMAIL_ID', 'Email-Id', 'email-id', 'EMAIL-ID', 'Email Id', 'email id', 'EMAIL ID'],\n    \n    'Personal Email': ['PersonalEmail', 'personalemail', 'PERSONALEMAIL', 'Personal_Email', 'personal_email', 'PERSONAL_EMAIL', 'Personal-Email', 'personal-email', 'PERSONAL-EMAIL', 'Personal Email', 'personal email', 'PERSONAL EMAIL', 'PersonalEmailID', 'personalemailid', 'PERSONALEMAILID', 'Personal_Email_ID', 'personal_email_id', 'PERSONAL_EMAIL_ID', 'Personal Email Id', 'personal email id', 'PERSONAL EMAIL ID', 'PersonalEmailAddress', 'personalemailaddress', 'PERSONALEMAILADDRESS', 'Personal_Email_Address', 'personal_email_address', 'PERSONAL_EMAIL_ADDRESS', 'Personal Email Address', 'personal email address', 'PERSONAL EMAIL ADDRESS', 'PrivateEmail', 'private_email', 'Private_Email', 'privateemail', 'PRIVATEEMAIL', 'HomeEmail', 'home_email', 'Home_Email', 'homeemail', 'HOMEEMAIL', 'IndividualEmail', 'individual_email', 'Individual_Email', 'individualemail', 'INDIVIDUALEMAIL', 'personal_emails/0', 'personal_emails/1', 'personal_emails/2', 'personal_emails/', 'personal_email'],\n    \n    'Phone Number': ['PhoneNumber', 'Phonenumber', 'phonenumber', 'PHONENUMBER', 'phoneNumber', 'Phone_Number', 'phone_number', 'PHONE_NUMBER', 'Phone-Number', 'phone-number', 'PHONE-NUMBER', 'Phone Number', 'phone number', 'PHONE NUMBER', 'Phone', 'phone', 'PHONE', 'Telephone', 'telephone', 'TELEPHONE', 'PhoneNo', 'phoneno', 'PHONENO', 'Phone_No', 'phone_no', 'PHONE_NO', 'Phone-No', 'phone-no', 'PHONE-NO', 'Phone No', 'phone no', 'PHONE NO', 'ContactNumber', 'PhoneNum', 'phonenum', 'PHONENUM', 'Phone_Num', 'phone_num', 'PHONE_NUM', 'Phone-Num', 'phone-num', 'PHONE-NUM', 'Phone Num', 'phone num', 'PHONE NUM', 'contactnumber', 'CONTACTNUMBER', 'Contact_Number', 'contact_number', 'CONTACT_NUMBER', 'Contact-Number', 'contact-number', 'CONTACT-NUMBER', 'Contact Number', 'contact number', 'CONTACT NUMBER', 'Mobile', 'mobile', 'MOBILE', 'MobileNumber', 'mobilenumber', 'MOBILENUMBER', 'Mobile_Number', 'mobile_number', 'MOBILE_NUMBER', 'Mobile-Number', 'mobile-number', 'MOBILE-NUMBER', 'Mobile Number', 'mobile number', 'MOBILE NUMBER', 'organization/phone', 'organization/primary_phone/number', 'organization/primary_phone/sanitized_number', 'organization/sanitized_phone'],\n\n    'LinkedIn': ['LinkedIn', 'linkedin', 'LINKEDIN', 'Linkedin', 'LinkedIN', 'LinkedInURL', 'linkedinurl', 'LINKEDINURL', 'LinkedIn_URL', 'linkedin_url', 'LINKEDIN_URL', 'LinkedIn-URL', 'linkedin-url', 'LINKEDIN-URL', 'LinkedIn URL', 'linkedin url', 'LINKEDIN URL', 'LinkedInProfile', 'linkedinprofile', 'LINKEDINPROFILE', 'LinkedIn_Profile', 'linkedin_profile', 'LINKEDIN_PROFILE', 'LinkedIn-Profile', 'linkedin-profile', 'LINKEDIN-PROFILE', 'LinkedIn Profile', 'linkedin profile', 'LINKEDIN PROFILE', 'LinkedInLink', 'linkedinlink', 'LINKEDINLINK', 'LinkedIn_Link', 'linkedin_link', 'LINKEDIN_LINK', 'LinkedIn-Link', 'linkedin-link', 'LINKEDIN-LINK', 'LinkedIn Link', 'linkedin link', 'LINKEDIN LINK', 'LinkedInID', 'linkedinid', 'LINKEDINID', 'LinkedIn_ID', 'linkedin_id', 'LINKEDIN_ID', 'LinkedIn-Id', 'linkedin-id', 'LINKEDIN-ID', 'LinkedIn Id', 'linkedin id', 'LINKEDIN ID', 'LI_Profile', 'li_profile', 'LIProfile', 'liprofile', 'LI PROFILE', 'Profile_LinkedIn', 'profile_linkedin', 'Profile_Linked_In', 'profile_linked_in', 'linkedin_url', 'organization/linkedin_uid', 'organization/linkedin_url', 'organization_linkedin_url'],\n\n    'Job Title': [\"JobTitle\", \"jobtitle\", \"JOBTITLE\", \"Job_Title\", \"job_title\", \"JOB_TITLE\", \"Job-Title\", \"job-title\", \"JOB-TITLE\", \"Job Title\", \"job title\", \"JOB TITLE\", \"JobRole\", \"jobrole\", \"JOBROLE\", \"Job_Role\", \"job_role\", \"JOB_ROLE\", \"Job-Role\", \"job-role\", \"JOB-ROLE\", \"Job Role\", \"job role\", \"JOB ROLE\", \"JobPosition\", \"jobposition\", \"JOBPOSITION\", \"Job_Position\", \"job_position\", \"JOB_POSITION\", \"Job-Position\", \"job-position\", \"JOB-POSITION\", \"Job Position\", \"job position\", \"JOB POSITION\", \"JobDesignation\", \"jobdesignation\", \"JOBDESIGNATION\", \"Job_Designation\", \"job_designation\", \"JOB_DESIGNATION\", \"Job-Designation\", \"job-designation\", \"JOB-DESIGNATION\", \"Job Designation\", \"job designation\", \"JOB DESIGNATION\", \"Designation\", \"designation\", \"DESIGNATION\", \"Role\", \"role\", \"ROLE\", \"Position\", \"position\", \"POSITION\", \"departments/0\", \"departments/1\", \"departments/2\", \"departments\", \"department\", \"seniority\"],\n\n    \"Website\": [\"Website\", \"website\", \"WEBSITE\", \"WebSite\", \"WebsiteURL\", \"websiteurl\", \"WEBSITEURL\", \"Website_URL\", \"website_url\", \"WEBSITE_URL\", \"Website-URL\", \"website-url\", \"WEBSITE-URL\", \"Website URL\", \"website url\", \"WEBSITE URL\", \"WebsiteLink\", \"websitelink\", \"WEBSITELINK\", \"Website_Link\", \"website_link\", \"WEBSITE_LINK\", \"Website-Link\", \"website-link\", \"WEBSITE-LINK\", \"Website Link\", \"website link\", \"WEBSITE LINK\", \"WebsiteAddress\", \"websiteaddress\", \"WEBSITEADDRESS\", \"Website_Address\", \"website_address\", \"WEBSITE_ADDRESS\", \"Website-Address\", \"website-address\", \"WEBSITE-ADDRESS\", \"Website Address\", \"website address\", \"WEBSITE ADDRESS\", \"Domain\", \"domain\", \"DOMAIN\", \"CompanyDomain\", \"companydomain\", \"COMPANYDOMAIN\", \"Company_Domain\", \"company_domain\", \"COMPANY_DOMAIN\", \"Company-Website\", \"company-website\", \"Company_Website\", \"company_website\", \"Company Website\", \"company website\", \"organization_website_url\", \"organization_website_url/0\", \"organization/website_url\", \"organization/primary_domain\"],\n\n    \"Company\": [\"Company Name\", \"CompanyName\", \"companyname\", \"COMPANYNAME\", \"Company_Name\", \"company_name\", \"COMPANY_NAME\", \"Company-Name\", \"company-name\", \"COMPANY-NAME\", \"company name\", \"COMPANY NAME\", \"Organization\", \"organization\", \"ORGANIZATION\", \"Org\", \"org\", \"ORG\", \"OrganizationName\", \"organizationname\", \"ORGANIZATIONNAME\", \"Organization_Name\", \"organization_name\", \"ORGANIZATION_NAME\", \"Organization-Name\", \"organization-name\", \"ORGANIZATION-NAME\", \"Organization Name\", \"organization name\", \"ORGANIZATION NAME\", \"Firm\", \"firm\", \"FIRM\", \"FirmName\", \"firmname\", \"FIRMNAME\", \"Firm_Name\", \"firm_name\", \"FIRM_NAME\", \"Firm-Name\", \"firm-name\", \"FIRM-NAME\", \"Firm Name\", \"firm name\", \"FIRM NAME\", \"Business\", \"business\", \"BUSINESS\", \"BusinessName\", \"businessname\", \"BUSINESSNAME\", \"Business_Name\", \"business_name\", \"BUSINESS_NAME\", \"Business-Name\", \"business-name\", \"BUSINESS-NAME\", \"Business Name\", \"business name\", \"BUSINESS NAME\", \"Company\", \"company\", \"COMPANY\", \"CorporateName\", \"corporatename\", \"Corporate_Name\", \"corporate_name\", \"CORPORATENAME\", \"CORPORATE_NAME\", \"Corporate-Name\", \"corporate-name\", \"CORPORATE-NAME\", \"Corporate Name\", \"corporate name\", \"CORPORATE NAME\", \"Company/Organization\", \"company/organization\", \"Company (Org)\", \"company (org)\", \"organization/name\", \"orgamizatil/names/0\"],\n\n    \"Company LinkedIn\": [\"Company LInkedin\", \"CompanyLinkedIn\", \"companylinkedin\", \"COMPANYLINKEDIN\", \"Company_LinkedIn\", \"company_linkedin\", \"COMPANY_LINKEDIN\", \"Company-LinkedIn\", \"company-linkedin\", \"COMPANY-LINKEDIN\", \"Company LinkedIn\", \"company linkedin\", \"COMPANY LINKEDIN\", \"CompanyLinkedInURL\", \"companylinkedinurl\", \"COMPANYLINKEDINURL\", \"Company_LinkedIn_URL\", \"company_linkedin_url\", \"COMPANY_LINKEDIN_URL\", \"Company-LinkedIn-URL\", \"company-linkedin-url\", \"COMPANY-LINKEDIN-URL\", \"Company LinkedIn URL\", \"company linkedin url\", \"COMPANY LINKEDIN URL\", \"CompanyLinkedInProfile\", \"companylinkedinprofile\", \"COMPANYLINKEDINPROFILE\", \"Company_LinkedIn_Profile\", \"company_linkedin_profile\", \"COMPANY_LINKEDIN_PROFILE\", \"Company-LinkedIn-Profile\", \"company-linkedin-profile\", \"COMPANY-LINKEDIN-PROFILE\", \"Company LinkedIn Profile\", \"company linkedin profile\", \"COMPANY LINKEDIN PROFILE\", \"CompanyLinkedInPage\", \"companylinkedinpage\", \"COMPANYLINKEDINPAGE\", \"Company_LinkedIn_Page\", \"company_linkedin_page\", \"COMPANY_LINKEDIN_PAGE\", \"Company-LinkedIn-Page\", \"company-linkedin-page\", \"COMPANY-LINKEDIN-PAGE\", \"Company LinkedIn Page\", \"company linkedin page\", \"COMPANY LINKEDIN PAGE\", \"LinkedInCompany\", \"linkedincompany\", \"LINKEDINCOMPANY\", \"LinkedIn_Company\", \"linkedin_company\", \"LINKEDIN_COMPANY\", \"LI_Company\", \"li_company\", \"LinkedIn Corp\", \"linkedin corp\", \"Company LI\", \"company li\", \"organization_linkedin_url\", \"organization/linkedin_url\"],\n\n    \"Company Facebook\": [\"Company Facebook\", \"CompanyFacebook\", \"companyfacebook\", \"COMPANYFACEBOOK\", \"Company_Facebook\", \"company_facebook\", \"COMPANY_FACEBOOK\", \"Company-Facebook\", \"company-facebook\", \"COMPANY-FACEBOOK\", \"company facebook\", \"COMPANY FACEBOOK\", \"CompanyFacebookURL\", \"companyfacebookurl\", \"COMPANYFACEBOOKURL\", \"Company_Facebook_URL\", \"company_facebook_url\", \"COMPANY_FACEBOOK_URL\", \"Company-Facebook-URL\", \"company-facebook-url\", \"COMPANY-FACEBOOK-URL\", \"Company Facebook URL\", \"company facebook url\", \"COMPANY FACEBOOK URL\", \"CompanyFacebookPage\", \"companyfacebookpage\", \"COMPANYFACEBOOKPAGE\", \"Company_Facebook_Page\", \"company_facebook_page\", \"COMPANY_FACEBOOK_PAGE\", \"Company-Facebook-Page\", \"company-facebook-page\", \"COMPANY-FACEBOOK-PAGE\", \"Company Facebook Page\", \"company facebook page\", \"COMPANY FACEBOOK PAGE\", \"FBCompany\", \"fbcompany\", \"FB_Company\", \"fb_company\", \"FB-Company\", \"fb-company\", \"FacebookCompany\", \"facebookcompany\", \"Facebook_Company\", \"facebook_company\", \"Facebook-Company\", \"facebook-company\", \"CompanyFB\", \"companyfb\", \"Company_FB\", \"company_fb\", \"Company-FB\", \"company-fb\", \"Facebook Business\", \"facebook business\", \"Facebook_Business\", \"facebook_business\", \"Facebook-Business\", \"facebook-business\", \"FB Business\", \"fb business\", \"FB_Business\", \"fb_business\", \"FB-Business\", \"fb-business\", \"organization/facebook_url\", \"company/facebook\"],\n    \n    \"City\": [\"City\", \"city\", \"CITY\", \"CityName\", \"cityname\", \"CITYNAME\", \"City_Name\", \"city_name\", \"CITY_NAME\", \"City-Name\", \"city-name\", \"CITY-NAME\", \"City Name\", \"city name\", \"CITY NAME\", \"Town\", \"town\", \"TOWN\", \"TownName\", \"townname\", \"TOWNNAME\", \"Town_Name\", \"town_name\", \"TOWN_NAME\", \"Town-Name\", \"town-name\", \"TOWN-NAME\", \"Town Name\", \"town name\", \"TOWN NAME\", \"City_State\", \"city_state\", \"CITY_STATE\", \"City-State\", \"city-state\", \"CITY-STATE\", \"City / State\", \"city / state\", \"CITY / STATE\", \"City, State\", \"city, state\", \"CITY, STATE\", \"LocationCity\", \"locationcity\", \"Location_City\", \"location_city\", \"Location-City\", \"location-city\", \"organization/city\", \"organization_city\"],\n\n    \"State\": [\"State\", \"state\", \"STATE\", \"StateName\", \"statename\", \"STATENAME\", \"State_Name\", \"state_name\", \"STATE_NAME\", \"State-Name\", \"state-name\", \"STATE-NAME\", \"State Name\", \"state name\", \"STATE NAME\", \"Province\", \"province\", \"PROVINCE\", \"ProvinceName\", \"provincename\", \"PROVINCENAME\", \"Province_Name\", \"province_name\", \"PROVINCE_NAME\", \"Province-Name\", \"province-name\", \"PROVINCE-NAME\", \"Province Name\", \"province name\", \"PROVINCE NAME\", \"Region\", \"region\", \"REGION\", \"RegionName\", \"regionname\", \"REGIONNAME\", \"Region_Name\", \"region_name\", \"REGION_NAME\", \"Region-Name\", \"region-name\", \"REGION-NAME\", \"Region Name\", \"region name\", \"REGION NAME\", \"State_Country\", \"state_country\", \"STATE_COUNTRY\", \"State-Country\", \"state-country\", \"STATE-COUNTRY\", \"State/Country\", \"state/country\", \"STATE/COUNTRY\", \"LocationState\", \"locationstate\", \"Location_State\", \"location_state\", \"Location-State\", \"location-state\", \"organization/state\"],\n\n    \"Country\": [\"country\", \"Country\", \"COUNTRY\", \"CountryName\", \"countryname\", \"COUNTRYNAME\", \"Country_Name\", \"country_name\", \"COUNTRY_NAME\", \"Country-Name\", \"country-name\", \"COUNTRY-NAME\", \"Country Name\", \"country name\", \"COUNTRY NAME\", \"Nation\", \"nation\", \"NATION\", \"NationName\", \"nationname\", \"NATIONNAME\", \"Nation_Name\", \"nation_name\", \"NATION_NAME\", \"Nation-Name\", \"nation-name\", \"NATION-NAME\", \"Nation Name\", \"nation name\", \"NATION NAME\", \"CountryCode\", \"countrycode\", \"COUNTRYCODE\", \"Country_Code\", \"country_code\", \"COUNTRY_CODE\", \"Country-Code\", \"country-code\", \"COUNTRY-CODE\", \"Country Code\", \"country code\", \"COUNTRY CODE\", \"Country_State\", \"country_state\", \"COUNTRY_STATE\", \"Country-State\", \"country-state\", \"COUNTRY-STATE\", \"Country / State\", \"country / state\", \"COUNTRY / STATE\", \"LocationCountry\", \"locationcountry\", \"Location_Country\", \"location_country\", \"Location-Country\", \"location-country\", \"Nation/Region\", \"nation/region\", \"Nation/State\", \"nation/state\", \"orgamization/country\", \"organization/country\"],\n\n    \"Industry\": [\"Industry\", \"industry\", \"INDUSTRY\", \"IndustryName\", \"industryname\", \"INDUSTRYNAME\", \"Industry_Name\", \"industry_name\", \"INDUSTRY_NAME\", \"Industry-Name\", \"industry-name\", \"INDUSTRY-NAME\", \"Industry Name\", \"industry name\", \"INDUSTRY NAME\", \"Sector\", \"sector\", \"SECTOR\", \"SectorName\", \"sectorname\", \"SECTORNAME\", \"Sector_Name\", \"sector_name\", \"SECTOR_NAME\", \"Sector-Name\", \"sector-name\", \"SECTOR-NAME\", \"Sector Name\", \"sector name\", \"SECTOR NAME\", \"BusinessSector\", \"businesssector\", \"BUSINESSSECTOR\", \"Business_Sector\", \"business_sector\", \"BUSINESS_SECTOR\", \"Business-Sector\", \"business-sector\", \"BUSINESS-SECTOR\", \"Business Sector\", \"business sector\", \"BUSINESS SECTOR\", \"Market\", \"market\", \"MARKET\", \"MarketName\", \"marketname\", \"MARKETNAME\", \"Market_Name\", \"market_name\", \"MARKET_NAME\", \"Market-Name\", \"market-name\", \"MARKET-NAME\", \"Market Name\", \"market name\", \"MARKET NAME\", \"IndustryType\", \"industrytype\", \"INDUSTRYTYPE\", \"Industry_Type\", \"industry_type\", \"INDUSTRY_TYPE\", \"Industry-Type\", \"industry-type\", \"INDUSTRY-TYPE\", \"Industry Classification\", \"industry classification\", \"INDUSTRY CLASSIFICATION\", \"Industry_Class\", \"industry_class\", \"INDUSTRY_CLASS\", \"Category\", \"category\", \"organization/industry\", \"organization/industries/0\", \"organization/industries/1\", \"organization/industries/2\", \"organization/industries\", \"organization/secondary_industries\", \"organization/secondary_industries/0\", \"organization/secondary_industries/1\"],\n\n    \"Google Review\": [\"Google Rivew\", \"GoogleReview\", \"googlereview\", \"GOOGLEREVIEW\", \"Google_Review\", \"google_review\", \"GOOGLE_REVIEW\", \"Google-Review\", \"google-review\", \"GOOGLE-REVIEW\", \"Google Review\", \"google review\", \"GOOGLE REVIEW\", \"Google_Rating\", \"google_rating\", \"GOOGLE_RATING\", \"Google-Rating\", \"google-rating\", \"GOOGLE-RATING\", \"RatingGoogle\", \"ratinggoogle\", \"RATINGGOOGLE\", \"ReviewGoogle\", \"reviewgoogle\", \"REVIEWGOOGLE\", \"Review Count\"],\n\n    'Rating': [\"Rating\"],\n\n    'Keywords': [\"keywords\", \"Keywords\", \"KEYWORDS\", \"organization/keywords\", \"organization/keywords/0\", \"organization/keywords/1\", \"organization/keywords/2\", \"organization/keywords/3\", \"organization/keywords/4\", \"organization/keywords/5\", \"organization/keywords/6\", \"organization/keywords/7\", \"organization/keywords/8\", \"organization/keywords/9\", \"organization/keywords/10\", \"organization/keywords/11\", \"organization/keywords/12\", \"organization/keywords/13\", \"organization/keywords/14\", \"organization/keywords/15\", \"organization/keywords/16\", \"organization/keywords/17\", \"organization/keywords/18\", \"organization/keywords/19\", \"organization/keywords/20\", \"organization/keywords/21\", \"organization/keywords/22\", \"organization/keywords/23\", \"organization/keywords/24\", \"organization/keywords/25\", \"organization/keywords/26\", \"organization/keywords/27\", \"organization/keywords/28\", \"organization/keywords/29\", \"organization/keywords/30\", \"organization/keywords/31\", \"organization/keywords/32\", \"organization/keywords/33\", \"organization/keywords/34\", \"organization/keywords/35\", \"organization/keywords/36\", \"organization/keywords/37\", \"organization/keywords/38\", \"organization/keywords/39\", \"organization/keywords/40\", \"organization/keywords/41\", \"organization/keywords/42\", \"organization/keywords/43\", \"organization/keywords/44\", \"organization/keywords/45\", \"organization/keywords/46\", \"organization/keywords/47\", \"organization/keywords/48\", \"organization/keywords/49\", \"organization/keywords/50\", \"organization/keywords/51\", \"organization/keywords/52\", \"organization/keywords/53\", \"organization/keywords/54\", \"organization/keywords/55\", \"organization/keywords/56\", \"organization/keywords/57\", \"organization/keywords/58\", \"organization/keywords/59\", \"organization/keywords/60\", \"organization/keywords/61\", \"organization/keywords/62\", \"organization/keywords/63\", \"organization/keywords/64\", \"organization/keywords/65\", \"organization/keywords/66\", \"organization/keywords/67\", \"organization/keywords/68\", \"organization/keywords/69\", \"organization/keywords/70\", \"organization/keywords/71\", \"organization/keywords/72\", \"organization/keywords/73\", \"organization/keywords/74\", \"organization/keywords/75\"],\n\n    'Languages': [\"Languages\", \"languages\", \"LANGUAGES\", \"organization/languages/0\", \"organization/languages/1\"],\n\n    'Address': [\"Address\", \"address\", \"ADDRESS\", \"Street Address\", \"street address\", \"STREET ADDRESS\", \"organization/raw_address\", \"organization/street_address\", \"organization/postal_code\"],\n\n    'Founded Year': [\"Founded Year\", \"founded year\", \"FOUNDED YEAR\", \"Founded\", \"founded\", \"FOUNDED\", \"organization/founded_year\"],\n\n    'Social Media': [\"Twitter\", \"twitter\", \"TWITTER\", \"Blog\", \"blog\", \"BLOG\", \"AngelList\", \"angellist\", \"ANGELLIST\", \"Crunchbase\", \"crunchbase\", \"CRUNCHBASE\", \"organization/twitter_url\", \"organization/blog_url\", \"organization/angellist_url\", \"organization/crunchbase_url\"],\n\n    'Phone Source': [\"Phone Source\", \"phone source\", \"PHONE SOURCE\", \"organization/primary_phone/source\"]\n  };\n\n  // Create a lookup map for faster processing\n  const columnLookup = new Map();\n  Object.entries(columnMappings).forEach(([standardColumn, variations]) => {\n    variations.forEach(variation => {\n      columnLookup.set(variation.toLowerCase().trim(), standardColumn);\n    });\n  });\n\n  // Process each CSV row\n  const standardizedItems = [];\n  const allItems = $input.all();\n\n  for (const item of allItems) {\n    const originalData = item.json;\n    const standardizedData = {};\n    \n    // Initialize all standard columns with \"-\"\n    Object.keys(columnMappings).forEach(standardColumn => {\n      standardizedData[standardColumn] = \"-\";\n    });\n    \n    // Map original columns to standard columns using the lookup map\n    Object.entries(originalData).forEach(([originalColumn, value]) => {\n      const lowerOriginalColumn = originalColumn.toLowerCase().trim();\n      const standardColumn = columnLookup.get(lowerOriginalColumn);\n      \n      if (standardColumn) {\n        // Use the value if it exists and is not empty, otherwise keep \"-\"\n        if (value !== null && value !== undefined && value !== '') {\n          const trimmedValue = String(value).trim();\n          if (trimmedValue !== '') {\n            standardizedData[standardColumn] = trimmedValue;\n          }\n        }\n      }\n    });\n    \n    // Skip unmapped columns - only keep fields defined in columnMappings\n    \n    standardizedItems.push({\n      json: standardizedData\n    });\n  }\n\n  return standardizedItems;\n} catch (error) {\n  console.error('Standardization failed:', error);\n  throw new Error(`Processing failed: ${error.message}`);\n}"},"typeVersion":2,"alwaysOutputData":false},{"id":"7e5cf94a-cb4e-4e7f-93ee-4e69aabc51ab","name":"Upload file","type":"n8n-nodes-base.googleDrive","position":[1264,-2912],"parameters":{"name":"={{ $now.format('dd-MM-yyyy | HH:mm') }}","driveId":{"__rl":true,"mode":"list","value":"My Drive"},"options":{},"folderId":{"__rl":true,"mode":"list","value":"1DlS21EpQWfBhQVdTvAePkGFgCXdFa2Fe","cachedResultUrl":"https://drive.google.com/drive/folders/1DlS21EpQWfBhQVdTvAePkGFgCXdFa2Fe","cachedResultName":"Good CSV"}},"typeVersion":3},{"id":"7ba17cb8-07b2-48e3-a255-4c904853b578","name":"Remove Duplicate Websites","type":"n8n-nodes-base.removeDuplicates","position":[304,-2496],"parameters":{"compare":"selectedFields","options":{},"fieldsToCompare":"Website"},"typeVersion":2},{"id":"8163ea79-18a2-408a-be00-10607d04727d","name":"Remove Duplicate Name","type":"n8n-nodes-base.removeDuplicates","position":[512,-2496],"parameters":{"compare":"selectedFields","options":{},"fieldsToCompare":"Name"},"typeVersion":2},{"id":"5c72eedb-5bb3-4843-9b4c-63b1474be31e","name":"Detect Wrong Website URLs ","type":"n8n-nodes-base.set","position":[768,-1792],"parameters":{"options":{"ignoreConversionErrors":true},"assignments":{"assignments":[{"id":"444addf4-1561-4ae9-aead-954331f6701b","name":"is_wrong_website","type":"boolean","value":"={{ \n  $json.Website !== \"\" && ( $json.Website.extractDomain().toLowerCase() ).match(/ikea|instagram|facebook|linktr.ee|wa.me/) !== null \n}}"}]},"includeOtherFields":true},"typeVersion":3.4},{"id":"8ba48e76-4ad8-4a14-bc18-627da27844ec","name":"HTTP Request","type":"n8n-nodes-base.httpRequest","onError":"continueErrorOutput","position":[-1072,-1104],"parameters":{"url":"={{ $json.Website }}","options":{}},"typeVersion":4.2},{"id":"165e2544-e409-4b32-a668-f7cff350a045","name":"Extract Tag & Attributee","type":"n8n-nodes-base.html","onError":"continueErrorOutput","position":[-784,-1296],"parameters":{"options":{"trimValues":true,"cleanUpText":true},"operation":"extractHtmlContent","extractionValues":{"values":[{"key":"title","cssSelector":"title"},{"key":"meta_description","attribute":"content","cssSelector":"meta[name=\"description\"]","returnValue":"attribute"},{"key":"H1","cssSelector":"h1"}]}},"typeVersion":1.2},{"id":"196fff75-dcf3-4b7d-af9a-3c7225fe5420","name":"Merge","type":"n8n-nodes-base.merge","position":[320,-1488],"parameters":{"mode":"combine","options":{},"combineBy":"combineAll"},"typeVersion":3.2},{"id":"7a7a3763-e2cd-4753-9f5c-905ecbb40a63","name":"Extract Website Details","type":"n8n-nodes-base.code","onError":"continueRegularOutput","position":[-784,-1120],"parameters":{"jsCode":"// Main processing code\nconst pageHTML = $json.data;\n\n// Extract emails\nconst emailRegex = /[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.(?!png|jpg|gif|jpeg)[a-zA-Z]{2,}/g;\nconst emails = pageHTML.match(emailRegex) || [];\nconst uniqueEmails = [...new Set(emails)];\n\n// Return the result in n8n format\nreturn {\n  json: {\n    emails: uniqueEmails,\n  }\n};"},"typeVersion":2},{"id":"97de3580-6421-483c-a0f9-dc0dc6527bfb","name":"Send a message","type":"n8n-nodes-base.gmail","position":[1456,-2912],"webhookId":"d727c378-b66c-4108-b8f0-fb46afa2e517","parameters":{"sendTo":"user@example.com","message":"=Hello,\n\nYour CSV is ready open with below link:\n{{ $json.webViewLink }}\n\nThanks,\nVekrro Automation","options":{"senderName":"Vekrro","appendAttribution":false},"subject":"âš¡LQ:  Your CSV is Ready","emailType":"text"},"typeVersion":2.1},{"id":"b942075e-4e69-4130-bd20-7bbc6cdf5288","name":"Send CSV","type":"n8n-nodes-base.whatsApp","position":[1296,-2528],"webhookId":"7e434526-57fa-4170-9ecd-11df99cde48d","parameters":{"mediaPath":"useMedian8n","operation":"send","messageType":"document","phoneNumberId":"764045186781201","additionalFields":{"mediaFilename":"={{ $now.format('dd LLL yyyy | HH:mm') }}"},"recipientPhoneNumber":"+1234567890"},"typeVersion":1},{"id":"ac0896ce-452f-4664-aaa2-9222b7345ff8","name":"Sticky Note7","type":"n8n-nodes-base.stickyNote","position":[-1264,-1680],"parameters":{"color":2,"width":1840,"height":1136,"content":"## IF website exist but Email doesn't"},"typeVersion":1},{"id":"03211840-dec8-43d1-bf16-d7cc38b785c0","name":"Loop","type":"n8n-nodes-base.splitInBatches","position":[1344,-1776],"parameters":{"options":{}},"typeVersion":3},{"id":"9c3a2783-f324-4c5b-8c69-ac268f41618c","name":"CSV Loop","type":"n8n-nodes-base.splitInBatches","position":[80,-2368],"parameters":{"options":{}},"typeVersion":3},{"id":"80d6abfe-74e9-4a9e-b030-739f34232b5b","name":"Send to Switch","type":"n8n-nodes-base.switch","position":[720,-2528],"parameters":{"rules":{"values":[{"outputKey":"Google Drive","conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"loose"},"combinator":"and","conditions":[{"id":"eb572b5b-b82a-4939-b5cc-3a99d7e083d5","operator":{"type":"string","operation":"equals"},"leftValue":"={{ $('On form submission').item.json['Save Into?'] }}","rightValue":"Google Drive"}]},"renameOutput":true},{"outputKey":"WhatsApp","conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"loose"},"combinator":"and","conditions":[{"id":"dcfee400-82af-4615-be54-beaf2c4db7f6","operator":{"name":"filter.operator.equals","type":"string","operation":"equals"},"leftValue":"={{ $('On form submission').item.json['Save Into?'] }}","rightValue":"WhatsApp"}]},"renameOutput":true},{"outputKey":"Google Sheets with Data Processing","conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"loose"},"combinator":"and","conditions":[{"id":"8e88d9f6-9b66-4a67-9117-05ae32fdf8a5","operator":{"name":"filter.operator.equals","type":"string","operation":"equals"},"leftValue":"={{ $('On form submission').item.json['Save Into?'] }}","rightValue":"Google Sheets with Data Processing"}]},"renameOutput":true}]},"options":{},"looseTypeValidation":true},"typeVersion":3.2},{"id":"d8b40252-b9db-4bf9-8139-698712fa264e","name":"Data Processing Switch","type":"n8n-nodes-base.switch","position":[960,-1824],"parameters":{"rules":{"values":[{"outputKey":"x Website","conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"loose"},"combinator":"and","conditions":[{"id":"90d35ba2-ccff-4cce-9665-d1cf450c7337","operator":{"type":"boolean","operation":"true","singleValue":true},"leftValue":"={{ $json.is_wrong_website }}","rightValue":""}]},"renameOutput":true},{"outputKey":"- Website +- Email +- Phone Number","conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"loose"},"combinator":"and","conditions":[{"id":"172c1c67-418e-4818-af57-4ccbdd4d8257","operator":{"type":"boolean","operation":"true","singleValue":true},"leftValue":"={{ $json.Website == \"-\" }}","rightValue":""}]},"renameOutput":true},{"outputKey":"+ Website + Email","conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"loose"},"combinator":"and","conditions":[{"id":"9b3ab227-f653-46bc-943b-574f977c51f3","operator":{"type":"boolean","operation":"true","singleValue":true},"leftValue":"={{ !$json.is_wrong_website && $json.Website !== \"-\" && $json.Email !== \"-\" || $json[\"Personal Email\"] !== \"-\" }}","rightValue":""}]},"renameOutput":true},{"outputKey":"+ Website - Email","conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"loose"},"combinator":"and","conditions":[{"id":"680ff331-3ec4-4521-984e-676c25f80b88","operator":{"type":"boolean","operation":"true","singleValue":true},"leftValue":"={{ !$json.is_wrong_website && $json.Email == \"-\" && $json[\"Personal Email\"] == \"-\" && $json.Website !== \"-\" }}","rightValue":"\"\""}]},"renameOutput":true}]},"options":{"allMatchingOutputs":true},"looseTypeValidation":true},"typeVersion":3.2},{"id":"e1027918-982b-4ddb-b1e6-59e3ea76df87","name":"E: Email not exist","type":"n8n-nodes-base.set","position":[1680,-1312],"parameters":{"options":{},"assignments":{"assignments":[{"id":"7cba57d4-9a16-4377-a7da-7443c66792c1","name":"Title","type":"string","value":""},{"id":"ab779ce1-7fe2-427e-939d-9fb1626692d8","name":"Meta Description","type":"string","value":""},{"id":"485ba3d4-63e8-48ab-bd13-b39ac9727b5d","name":"H1","type":"string","value":""},{"id":"c7079348-245f-4494-b2db-ce02367c1bb1","name":"is_valid_mail","type":"boolean","value":false}]}},"typeVersion":3.4},{"id":"abb98c93-57c5-4d24-b4dc-00d0faeb1d38","name":"E: Seng Process Data","type":"n8n-nodes-base.set","position":[2576,-1664],"parameters":{"options":{},"assignments":{"assignments":[{"id":"eac9fc13-20bf-4f03-a901-c248b6a544f7","name":"Title","type":"string","value":"={{ $json.Title ?? \"\" }}"},{"id":"28e67346-af51-4234-b0cf-f6eb0e4c9db7","name":"Meta Description","type":"string","value":"={{ $json[\"Meta Description\"] ?? \"\" }}"},{"id":"17b50e70-2247-4b86-9cdd-cbc2cf79b023","name":"H1","type":"string","value":"={{ $json.H1 }}"},{"id":"1e2c5b18-75c4-46e8-9203-a1aff155c393","name":"is_valid_mail","type":"boolean","value":true}]}},"typeVersion":3.4},{"id":"7f6bd9a0-e785-4958-952d-055267fdc9bb","name":"E: Right or Wrong","type":"n8n-nodes-base.if","position":[1888,-1520],"parameters":{"options":{},"conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"loose"},"combinator":"and","conditions":[{"id":"90e8a3ba-8318-4ee9-af17-51c5ac68fd30","operator":{"type":"boolean","operation":"true","singleValue":true},"leftValue":"={{ $json.is_deliverable }}","rightValue":""},{"id":"7e2d6595-0d7e-4571-81d3-ab615465df98","operator":{"type":"boolean","operation":"true","singleValue":true},"leftValue":"={{ $json.can_connect_smtp }}","rightValue":""},{"id":"61e8d98b-ea12-4c00-8a29-0f2da87a2390","operator":{"type":"boolean","operation":"true","singleValue":true},"leftValue":"={{ $json.is_safe_to_send }}","rightValue":""},{"id":"b6ea75fa-d70c-4687-967b-36955e23591c","operator":{"type":"boolean","operation":"true","singleValue":true},"leftValue":"={{ $json.mx_accepts_mail }}","rightValue":""}]},"looseTypeValidation":true},"typeVersion":2.2},{"id":"56d12de4-b77f-4eba-af94-b9332a8e7b65","name":"E: Verify","type":"n8n-nodes-base.httpRequest","onError":"continueErrorOutput","position":[1600,-1696],"parameters":{"url":"=https://emailverifier.reoon.com/api/v1/verify?email={{ $json['Email'].trim() }}&key=<key>&mode=power","options":{}},"typeVersion":4.2},{"id":"71e2037e-814b-440d-87d5-b5fa2e5c885b","name":"E: exist or not","type":"n8n-nodes-base.if","position":[1392,-1408],"parameters":{"options":{},"conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"loose"},"combinator":"and","conditions":[{"id":"bb24a871-f13e-4896-84b1-db2ec9cf3fc9","operator":{"type":"string","operation":"notEquals"},"leftValue":"={{ $json['Email'] }}","rightValue":"={{ \"-\" }}"}]},"looseTypeValidation":true},"typeVersion":2.2},{"id":"a7e20799-c55a-4a2f-9e47-9c440bff2ce4","name":"E: Merge","type":"n8n-nodes-base.merge","position":[3440,-1744],"parameters":{"mode":"combine","options":{},"combineBy":"combineAll"},"typeVersion":3.2},{"id":"439ed583-b586-4b54-a2c7-4051c654e07e","name":"Find One Correct mail","type":"@n8n/n8n-nodes-langchain.openAi","position":[2800,-912],"parameters":{"modelId":{"__rl":true,"mode":"list","value":"gpt-5-nano","cachedResultName":"GPT-5-NANO"},"options":{},"messages":{"values":[{"content":"=Find Only one Correct Email address.\n\nInput : {{ $json.emails }}\n\nOutput Format:\nreturn only single email nothing other stuff like \\n, \\ etx."}]}},"typeVersion":1.8},{"id":"373fa8e9-cfaf-4034-8821-9cad7379d7b5","name":"WE: Right or Wrong","type":"n8n-nodes-base.if","position":[3152,-1136],"parameters":{"options":{},"conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"loose"},"combinator":"and","conditions":[{"id":"90e8a3ba-8318-4ee9-af17-51c5ac68fd30","operator":{"type":"boolean","operation":"true","singleValue":true},"leftValue":"={{ $json.is_deliverable }}","rightValue":""},{"id":"7e2d6595-0d7e-4571-81d3-ab615465df98","operator":{"type":"boolean","operation":"true","singleValue":true},"leftValue":"={{ $json.can_connect_smtp }}","rightValue":""},{"id":"61e8d98b-ea12-4c00-8a29-0f2da87a2390","operator":{"type":"boolean","operation":"true","singleValue":true},"leftValue":"={{ $json.is_safe_to_send }}","rightValue":""},{"id":"b6ea75fa-d70c-4687-967b-36955e23591c","operator":{"type":"boolean","operation":"true","singleValue":true},"leftValue":"={{ $json.mx_accepts_mail }}","rightValue":""}]},"looseTypeValidation":true},"typeVersion":2.2},{"id":"1e48b529-3ac7-43ce-bc76-ebecd30cd6bd","name":"WE: Verify","type":"n8n-nodes-base.httpRequest","position":[3168,-912],"parameters":{"url":"=https://emailverifier.reoon.com/api/v1/verify?email={{ $json.message.content.trim() }}&key=<key>&mode=power","options":{}},"typeVersion":4.2},{"id":"7921a8a2-dae8-4562-b253-68850ad55436","name":"WE: Send Email found Data","type":"n8n-nodes-base.set","position":[2864,-1088],"parameters":{"options":{},"assignments":{"assignments":[{"id":"4fade1be-d8f5-482d-a102-ce84be727869","name":"is_valid_mail","type":"boolean","value":false}]}},"typeVersion":3.4},{"id":"22ab561a-b1b6-46b5-a659-ca5f75ab4860","name":"WE: Email found or not","type":"n8n-nodes-base.if","position":[2384,-1072],"parameters":{"options":{},"conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"combinator":"and","conditions":[{"id":"045ec014-f7ed-46c5-94c7-728e8813a6f6","operator":{"type":"boolean","operation":"false","singleValue":true},"leftValue":"={{ $json.emails.length > 0  }}","rightValue":""}]}},"typeVersion":2.2},{"id":"25e68b64-160a-43d6-9f6f-ea67c54e8d75","name":"WE: Scrap Website HTML..","type":"n8n-nodes-base.httpRequest","onError":"continueErrorOutput","position":[1920,-1056],"parameters":{"url":"={{ $('Loop').item.json.Website }}","options":{}},"typeVersion":4.2},{"id":"4bd14328-c073-4d18-83c1-06029e1a9cd5","name":"WE: Scrap Website mails","type":"n8n-nodes-base.code","onError":"continueRegularOutput","position":[2192,-1072],"parameters":{"jsCode":"// Main processing code\nconst pageHTML = $json.data;\n\n// Extract emails\nconst emailRegex = /[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.(?!png|jpg|gif|jpeg)[a-zA-Z]{2,}/g;\nconst emails = pageHTML.match(emailRegex) || [];\nconst uniqueEmails = [...new Set(emails)];\n\n// Return the result in n8n format\nreturn {\n  json: {\n    emails: uniqueEmails || \"\"\n  }\n};"},"typeVersion":2},{"id":"0e0c0f65-30ac-4735-b88e-e752cc565d61","name":"WE: Website Scrapping Error","type":"n8n-nodes-base.set","position":[2192,-896],"parameters":{"options":{},"assignments":{"assignments":[{"id":"7cba57d4-9a16-4377-a7da-7443c66792c1","name":"Title","type":"string","value":""},{"id":"ab779ce1-7fe2-427e-939d-9fb1626692d8","name":"Meta Description","type":"string","value":""},{"id":"6b617839-6917-4fb4-9e8c-cf777303d605","name":"H1","type":"string","value":""},{"id":"c7079348-245f-4494-b2db-ce02367c1bb1","name":"is_valid_mail","type":"boolean","value":false}]}},"typeVersion":3.4},{"id":"c6e4b3fd-d1bf-4b61-b894-d86c39d9c633","name":"WE: Extract Tag & Attributee","type":"n8n-nodes-base.html","onError":"continueErrorOutput","position":[2192,-1264],"parameters":{"options":{"trimValues":true,"cleanUpText":true},"operation":"extractHtmlContent","extractionValues":{"values":[{"key":"Title","cssSelector":"title"},{"key":"Meta Description","attribute":"content","cssSelector":"meta[name=\"description\"]","returnValue":"attribute"},{"key":"H1","cssSelector":"h1"}]}},"typeVersion":1.2},{"id":"5c602947-13cf-486a-8f86-1e83d5422fec","name":"E: Website Scrapping Error","type":"n8n-nodes-base.set","position":[2384,-1472],"parameters":{"options":{},"assignments":{"assignments":[{"id":"7cba57d4-9a16-4377-a7da-7443c66792c1","name":"Title","type":"string","value":""},{"id":"ab779ce1-7fe2-427e-939d-9fb1626692d8","name":"Meta Description","type":"string","value":""},{"id":"f7fee27e-b00b-461d-9b44-4da307ec3e23","name":"H1","type":"string","value":""},{"id":"b7883973-d0c2-45fb-a1be-7734a3d527c3","name":"is_valid_mail","type":"boolean","value":false}]}},"typeVersion":3.4},{"id":"058e5301-a023-49c6-bb58-67a0ef7c386a","name":"E: Extract Tag & Attribute","type":"n8n-nodes-base.html","position":[2384,-1664],"parameters":{"options":{"trimValues":true,"cleanUpText":true},"operation":"extractHtmlContent","extractionValues":{"values":[{"key":"Title","cssSelector":"title"},{"key":"Meta Description","attribute":"content","cssSelector":"meta[name=\"description\"]","returnValue":"attribute"},{"key":"H1","cssSelector":"h1"}]}},"typeVersion":1.2},{"id":"325e2961-8679-4525-8779-cefb690900ed","name":"E: Scrap Website HTML","type":"n8n-nodes-base.httpRequest","onError":"continueErrorOutput","position":[2112,-1552],"parameters":{"url":"={{ $('Loop').item.json.Website }}","options":{}},"typeVersion":4.2},{"id":"a24cdba5-d590-4800-9133-a886f7d9d6b2","name":"WE: Email is Wrong","type":"n8n-nodes-base.set","position":[3696,-1024],"parameters":{"options":{},"assignments":{"assignments":[{"id":"acb5e217-927a-4b28-bdf3-f6b60f5fff88","name":"is_valid_mail","type":"boolean","value":true}]}},"typeVersion":3.4},{"id":"91197154-6610-43b0-8c20-7c729acb77a5","name":"WE: Send New Email","type":"n8n-nodes-base.set","position":[3696,-1264],"parameters":{"options":{},"assignments":{"assignments":[{"id":"a366eccd-f1ce-43b8-bc43-a83d35717438","name":"New Email","type":"string","value":"={{ $json.email }}"},{"id":"aad26d3e-339b-4681-aa34-10d67c0fab62","name":"is_valid_mail","type":"boolean","value":true}]}},"typeVersion":3.4},{"id":"b5839c04-2b6d-4232-9672-43a5a155cd8c","name":"Full Merge","type":"n8n-nodes-base.merge","position":[3456,-752],"parameters":{"mode":"combine","options":{},"combineBy":"combineAll"},"typeVersion":3.2},{"id":"dc417b0c-30f9-4b7d-b04d-3bcd614123c5","name":"PR: Exist or not","type":"n8n-nodes-base.if","position":[1360,-736],"parameters":{"options":{},"conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"loose"},"combinator":"and","conditions":[{"id":"85be9c48-d1f6-4568-ade9-7b9a3ccc9edc","operator":{"type":"string","operation":"equals"},"leftValue":"={{ $json['Personal Email'] }}","rightValue":"={{ \"-\" }}"}]},"looseTypeValidation":true},"typeVersion":2.2},{"id":"93e229a9-9ba9-421b-aaa5-29eab34a0101","name":"PE: Not Exist","type":"n8n-nodes-base.set","position":[1568,-752],"parameters":{"options":{},"assignments":{"assignments":[{"id":"646241fa-d1d0-4726-893f-73ffbc6d1496","name":"is_valid_personal_email","type":"boolean","value":"={{ false }}"}]}},"typeVersion":3.4},{"id":"5b1baec6-43ef-4b6f-a48b-f84fed2ca5a4","name":"PE: Verify","type":"n8n-nodes-base.httpRequest","position":[1760,-720],"parameters":{"url":"=https://emailverifier.reoon.com/api/v1/verify?email={{ $json['Email'].trim() }}&key=<key>&mode=power","options":{}},"typeVersion":4.2},{"id":"db57f63e-04a8-4c15-8a9a-503281d629a4","name":"PE: Send Data","type":"n8n-nodes-base.set","position":[1968,-720],"parameters":{"options":{},"assignments":{"assignments":[{"id":"646241fa-d1d0-4726-893f-73ffbc6d1496","name":"is_valid_personal_email","type":"boolean","value":"={{ $json.is_deliverable && $json.can_connect_smtp && $json.is_safe_to_send && $json.mx_accepts_mail }}"}]}},"typeVersion":3.4},{"id":"2f7be4f4-2c6a-4a6f-87b3-4302e4abbc50","name":"WP: Merge","type":"n8n-nodes-base.merge","position":[3440,-1536],"parameters":{"mode":"combine","options":{},"combineBy":"combineAll"},"typeVersion":3.2},{"id":"a1832ca3-b27a-4dbb-a798-1062d54fa5dc","name":"WE: Tag & Attribute Error","type":"n8n-nodes-base.set","position":[2576,-1248],"parameters":{"options":{},"assignments":{"assignments":[{"id":"7cba57d4-9a16-4377-a7da-7443c66792c1","name":"Title","type":"string","value":""},{"id":"ab779ce1-7fe2-427e-939d-9fb1626692d8","name":"Meta Description","type":"string","value":""},{"id":"07bad417-3581-40b5-86bc-1f8860c12448","name":"H1","type":"string","value":""}]}},"typeVersion":3.4},{"id":"7fbd856a-34ad-4c0b-b87b-42a635ca88c8","name":"WE: Set empty if not available","type":"n8n-nodes-base.set","position":[2400,-1280],"parameters":{"options":{},"assignments":{"assignments":[{"id":"19cc3011-6+1234567890e97-a58d4697bf21","name":"Title","type":"string","value":"={{ $json.Title || \"\" }}"},{"id":"cf104ca9-358e-47c4-8dc9-d9b5d1517b74","name":"Meta Description","type":"string","value":"={{ $json[\"Meta Description\"] || \"\" }}"},{"id":"372d79d2-7937-4c51-b313-566d1d1b71a0","name":"H1","type":"string","value":"={{ $json.H1 }}"}]}},"typeVersion":3.4},{"id":"281dfa93-79d2-4386-80a9-514f71199b6e","name":"Remove No Email Records","type":"n8n-nodes-base.filter","position":[1008,-1328],"parameters":{"options":{},"conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"loose"},"combinator":"or","conditions":[{"id":"e69dc3c6-02fc-48f9-a6da-ad36e45c1616","operator":{"type":"boolean","operation":"true","singleValue":true},"leftValue":"={{ $json.is_valid_mail }}","rightValue":""},{"id":"21037a25-b08a-446a-b496-41b514c7351f","operator":{"type":"boolean","operation":"true","singleValue":true},"leftValue":"={{ $json.is_vaid_personal_email }}","rightValue":""},{"id":"a5849320-dc3d-4fce-a1eb-8bcac24ecf5e","operator":{"type":"boolean","operation":"true","singleValue":true},"leftValue":"={{ $json['New Email'] }}","rightValue":""}]},"looseTypeValidation":true},"typeVersion":2.2},{"id":"ef74a457-b3eb-49a1-bf69-991e588142b7","name":"Personalization Loop","type":"n8n-nodes-base.splitInBatches","position":[1024,-384],"parameters":{"options":{}},"typeVersion":3},{"id":"7cd0b27b-dd11-4d1f-98c5-d7128db966d9","name":"B: Gemini","type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","position":[1152,96],"parameters":{"options":{}},"typeVersion":1},{"id":"f2928806-b6bf-4411-b854-1f986031baef","name":"Output Parser","type":"@n8n/n8n-nodes-langchain.outputParserStructured","position":[1264,96],"parameters":{"autoFix":true,"jsonSchemaExample":"{\n    \"New Name\": \"New Name\",\n    \"New Company\": \"New Company\",\n\t\"Personalization 1\": \"First Personalization Message\",\n    \"Personalization 2\": \"Second Personalization Message\"\n}"},"typeVersion":1.3},{"id":"86a58436-1d55-4865-82af-6dfcdf2d3238","name":"5 nano","type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","position":[1040,96],"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-5-nano","cachedResultName":"gpt-5-nano"},"options":{}},"typeVersion":1.2},{"id":"e8a0effc-1ae9-4f12-a071-70d09b33c92e","name":"P: Merge","type":"n8n-nodes-base.merge","position":[1952,192],"parameters":{"mode":"combine","options":{},"combineBy":"combineAll"},"typeVersion":3.2},{"id":"ee0ab610-098b-42ed-9951-f8547fa090e5","name":"Personalize Message","type":"@n8n/n8n-nodes-langchain.chainLlm","position":[1072,-128],"parameters":{"text":"=# Input Data:\n\nName:  {{ $json.Name }}\nFirst Name: {{ $json['First Name'] }}\nLast Name: {{ $json['Last Name'] }}\nJob Title: {{ $json['Job Title'] }}\nCompany Name: {{ $json.Company }}\nIndustry: {{ $json.Industry }}\nKeywords: {{ $json.Keywords }}\nWebsite Title: {{ $json.Title }}\nWebsite Meta Description: {{ $json['Meta Description'] }}\nWebsite H1: {{ $json['H1'] }}","batching":{},"messages":{"messageValues":[{"message":"=You are helpful Email Outreach and Copy writing expert.\n\n# Instruction :-\n\n## Personalization Message 1 Propmpt:\n{{ $('On form submission').item.json['Email Personalization Prompt 1'] }}\n\n## Personalization Message 2 Propmpt:\n{{ $('On form submission').item.json['Email Personalization Prompt 2'] }}\n\n## New Name:\nMake perfect New Name for email body using provided data.\n\n## New Company Name:\nMake perfect New Comapny Name(make short) for email body using provided data. for Example \"Zomato PVT LTD\" convert into \"Zomato\" only\n"}]},"promptType":"define","needsFallback":true,"hasOutputParser":true},"typeVersion":1.7},{"id":"67f61ea7-9e7e-4388-b8a4-760e80842fac","name":"Rename New Email Keys","type":"n8n-nodes-base.renameKeys","position":[1712,-464],"parameters":{"keys":{"key":[{"newKey":"Wrong Email","currentKey":"Email"},{"newKey":"Email","currentKey":"New Email"}]},"additionalOptions":{}},"typeVersion":1},{"id":"a5442763-b8bc-4808-874b-e3ec810c8eeb","name":"Rename PE Keys","type":"n8n-nodes-base.renameKeys","position":[2064,-400],"parameters":{"keys":{"key":[{"newKey":"Wrong Email","currentKey":"Email"},{"newKey":"Email","currentKey":"Personal Email"}]},"additionalOptions":{}},"typeVersion":1},{"id":"faf0c665-527c-4179-a335-fff7aaec682b","name":"Rename PE + New Email Keys","type":"n8n-nodes-base.renameKeys","position":[1872,-336],"parameters":{"keys":{"key":[{"newKey":"Wrong Email","currentKey":"Email"},{"newKey":"Email","currentKey":"New Email"}]},"additionalOptions":{}},"typeVersion":1},{"id":"6ba1a75f-808d-4fac-b9a3-c584bd15177e","name":"+2 Email Merge","type":"n8n-nodes-base.merge","position":[2592,-352],"parameters":{},"typeVersion":3.2},{"id":"c21cba74-3bab-4e6b-8a77-77206c0883d9","name":"+1 Email Merge","type":"n8n-nodes-base.merge","position":[2320,-448],"parameters":{"numberInputs":3},"typeVersion":3.2},{"id":"d64ff406-ea54-4c76-b838-fc3de205789c","name":"Email Switch","type":"n8n-nodes-base.switch","position":[1440,-448],"parameters":{"rules":{"values":[{"outputKey":"New Email","conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"loose"},"combinator":"and","conditions":[{"id":"b7f87caa-6a5f-4535-8167-6554d61e1854","operator":{"type":"boolean","operation":"true","singleValue":true},"leftValue":"={{ $json[\"New Email\"] && !$json.is_valid_personal_email }}","rightValue":""}]},"renameOutput":true},{"outputKey":"Email","conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"loose"},"combinator":"and","conditions":[{"id":"ba3ab651-bc67-4e20-9ebe-52c29fa0c9d9","operator":{"type":"boolean","operation":"true","singleValue":true},"leftValue":"={{ $json.is_valid_mail && !$json[\"New Email\"] && !$json.is_valid_personal_email }}","rightValue":""}]},"renameOutput":true},{"outputKey":"Personal Email","conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"loose"},"combinator":"and","conditions":[{"id":"f4127b1e-1bda-4136-b617-55d462fcf8a7","operator":{"type":"boolean","operation":"true","singleValue":true},"leftValue":"={{ $json.is_valid_personal_email && !$json.is_valid_mail && !$json[\"New Email\"] }}","rightValue":""}]},"renameOutput":true},{"outputKey":"E  + PE","conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"loose"},"combinator":"and","conditions":[{"id":"7e658aec-3339-40eb-8abd-0d318bbb0d0e","operator":{"type":"boolean","operation":"true","singleValue":true},"leftValue":"={{ $json.is_valid_personal_email && $json.is_valid_mail }}","rightValue":""}]},"renameOutput":true},{"outputKey":"PE + New Email","conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"loose"},"combinator":"and","conditions":[{"id":"e2741fa6-b703-4fed-97a2-4216ae687770","operator":{"type":"boolean","operation":"true","singleValue":true},"leftValue":"={{ $json.is_vaid_personal_email && $json[\"New Email\"] && !$json.is_valid_mail }}","rightValue":""}]},"renameOutput":true}]},"options":{"allMatchingOutputs":true},"looseTypeValidation":true},"typeVersion":3.2},{"id":"387262f9-5be8-479b-a2f0-19831180f8f9","name":"+1 Email","type":"n8n-nodes-base.googleSheets","position":[3440,-432],"parameters":{"columns":{"value":{"H1":"={{ $json[\"H1\"] }}","City":"={{ $json[\"City\"] }}","Name":"={{ $json[\"Name\"] }}","Email":"={{ $json[\"Email\"] }}","State":"={{ $json[\"State\"] }}","Title":"={{ $json[\"Title\"] }}","Rating":"={{ $json[\"Rating\"] }}","Address":"={{ $json[\"Address\"] }}","Company":"={{ $json[\"Company\"] }}","Country":"={{ $json[\"Country\"] }}","Website":"={{ $json[\"Website\"] }}","Industry":"={{ $json[\"Industry\"] }}","Keywords":"={{ $json[\"Keywords\"] }}","Language":"={{ $json[\"Languages\"] }}","LinkedIn":"={{ $json[\"LinkedIn\"] }}","New Name":"={{ $json['New Name'] }}","Job Title":"={{ $json[\"Job Title\"] }}","Last Name":"={{ $json[\"Last Name\"] }}","Created_at":"={{ $now.format('dd LLL yyyy | HH:mm') }}","First Name":"={{ $json[\"First Name\"] }}","New Company":"={{ $json['New Company'] }}","Founded Year":"={{ $json[\"Founded Year\"] }}","Phone Number":"={{ $json[\"Phone Number\"] }}","Phone Source":"={{ $json[\"Phone Source\"] }}","Social Media":"={{ $json[\"Social Media\"] }}","Google Review":"={{ $json[\"Google Review\"] }}","Personal Email":"={{ $json[\"Personal Email\"] }}","Company Facebook":"={{ $json[\"Company Facebook\"] }}","Company LinkedIn":"={{ $json[\"Company LinkedIn\"] }}","Meta Description":"={{ $json[\"Meta Description\"] }}","Personalization 1":"={{ $json['Personalization 1'] }}","Personalization 2":"={{ $json['Personalization 2'] }}"},"schema":[{"id":"Name","type":"string","display":true,"required":false,"displayName":"Name","defaultMatch":false,"canBeUsedToMatch":true},{"id":"First Name","type":"string","display":true,"required":false,"displayName":"First Name","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Last Name","type":"string","display":true,"required":false,"displayName":"Last Name","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Email","type":"string","display":true,"required":false,"displayName":"Email","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Personal Email","type":"string","display":true,"required":false,"displayName":"Personal Email","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Phone Number","type":"string","display":true,"required":false,"displayName":"Phone Number","defaultMatch":false,"canBeUsedToMatch":true},{"id":"LinkedIn","type":"string","display":true,"required":false,"displayName":"LinkedIn","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Job Title","type":"string","display":true,"required":false,"displayName":"Job Title","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Website","type":"string","display":true,"required":false,"displayName":"Website","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Company","type":"string","display":true,"required":false,"displayName":"Company","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Company LinkedIn","type":"string","display":true,"required":false,"displayName":"Company LinkedIn","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Company Facebook","type":"string","display":true,"required":false,"displayName":"Company Facebook","defaultMatch":false,"canBeUsedToMatch":true},{"id":"City","type":"string","display":true,"required":false,"displayName":"City","defaultMatch":false,"canBeUsedToMatch":true},{"id":"State","type":"string","display":true,"required":false,"displayName":"State","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Country","type":"string","display":true,"required":false,"displayName":"Country","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Industry","type":"string","display":true,"required":false,"displayName":"Industry","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Google Review","type":"string","display":true,"required":false,"displayName":"Google Review","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Rating","type":"string","display":true,"required":false,"displayName":"Rating","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Keywords","type":"string","display":true,"required":false,"displayName":"Keywords","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Language","type":"string","display":true,"required":false,"displayName":"Language","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Address","type":"string","display":true,"required":false,"displayName":"Address","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Founded Year","type":"string","display":true,"required":false,"displayName":"Founded Year","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Social Media","type":"string","display":true,"required":false,"displayName":"Social Media","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Phone Source","type":"string","display":true,"required":false,"displayName":"Phone Source","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Title","type":"string","display":true,"required":false,"displayName":"Title","defaultMatch":false,"canBeUsedToMatch":true},{"id":"H1","type":"string","display":true,"required":false,"displayName":"H1","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Meta Description","type":"string","display":true,"required":false,"displayName":"Meta Description","defaultMatch":false,"canBeUsedToMatch":true},{"id":"New Name","type":"string","display":true,"removed":false,"required":false,"displayName":"New Name","defaultMatch":false,"canBeUsedToMatch":true},{"id":"New Company","type":"string","display":true,"removed":false,"required":false,"displayName":"New Company","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Personalization 1","type":"string","display":true,"removed":false,"required":false,"displayName":"Personalization 1","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Personalization 2","type":"string","display":true,"removed":false,"required":false,"displayName":"Personalization 2","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Created_at","type":"string","display":true,"removed":false,"required":false,"displayName":"Created_at","defaultMatch":false,"canBeUsedToMatch":true}],"mappingMode":"defineBelow","matchingColumns":[],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{"useAppend":true},"operation":"append","sheetName":{"__rl":true,"mode":"list","value":"gid=0","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1VJ3OxQh806yQoFqch9ZSN3wPoHiMtX17le-o5qe1x0Y/edit#gid=0","cachedResultName":"Sheet1"},"documentId":{"__rl":true,"mode":"list","value":"1VJ3OxQh806yQoFqch9ZSN3wPoHiMtX17le-o5qe1x0Y","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1VJ3OxQh806yQoFqch9ZSN3wPoHiMtX17le-o5qe1x0Y/edit?usp=drivesdk","cachedResultName":"+1 Email"}},"typeVersion":4.7},{"id":"6f7ebe3f-0150-4ed9-8803-cf8cfab4a6eb","name":"+2 Email","type":"n8n-nodes-base.googleSheets","position":[2976,-352],"parameters":{"columns":{"value":{"H1":"={{ $json.H1 }}","City":"={{ $json.City }}","Name":"={{ $json.Name }}","Email":"={{ $json.Email }}","State":"={{ $json.State }}","Title":"={{ $json.Title }}","Rating":"={{ $json.Rating }}","Address":"={{ $json.Address }}","Company":"={{ $json.Company }}","Country":"={{ $json.Country }}","Website":"={{ $json.Website }}","Industry":"={{ $json.Industry }}","Keywords":"={{ $json.Keywords }}","Language":"={{ $json.Languages }}","LinkedIn":"={{ $json.LinkedIn }}","New Name":"={{ $json[\"New Name\"] }}","Job Title":"={{ $json[\"Job Title\"] }}","Last Name":"={{ $json[\"Last Name\"] }}","Created_at":"={{ $now.format('dd LLL yyyy | HH:mm') }}","First Name":"={{ $json[\"First Name\"] }}","New Company":"={{ $json[\"New Company\"] }}","Founded Year":"={{ $json[\"Founded Year\"] }}","Phone Number":"={{ $json[\"Phone Number\"] }}","Phone Source":"={{ $json[\"Phone Source\"] }}","Social Media":"={{ $json[\"Social Media\"] }}","Google Review":"={{ $json[\"Google Review\"] }}","Personal Email":"={{ $json[\"Personal Email\"] }}","Company Facebook":"={{ $json[\"Company Facebook\"] }}","Company LinkedIn":"={{ $json[\"Company LinkedIn\"] }}","Meta Description":"={{ $json[\"Meta Description\"] }}","Personalization 1":"={{ $json[\"Personalization 1\"] }}","Personalization 2":"={{ $json[\"Personalization 2\"] }}"},"schema":[{"id":"Name","type":"string","display":true,"required":false,"displayName":"Name","defaultMatch":false,"canBeUsedToMatch":true},{"id":"First Name","type":"string","display":true,"required":false,"displayName":"First Name","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Last Name","type":"string","display":true,"required":false,"displayName":"Last Name","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Email","type":"string","display":true,"required":false,"displayName":"Email","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Personal Email","type":"string","display":true,"required":false,"displayName":"Personal Email","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Phone Number","type":"string","display":true,"required":false,"displayName":"Phone Number","defaultMatch":false,"canBeUsedToMatch":true},{"id":"LinkedIn","type":"string","display":true,"required":false,"displayName":"LinkedIn","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Job Title","type":"string","display":true,"required":false,"displayName":"Job Title","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Website","type":"string","display":true,"required":false,"displayName":"Website","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Company","type":"string","display":true,"required":false,"displayName":"Company","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Company LinkedIn","type":"string","display":true,"required":false,"displayName":"Company LinkedIn","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Company Facebook","type":"string","display":true,"required":false,"displayName":"Company Facebook","defaultMatch":false,"canBeUsedToMatch":true},{"id":"City","type":"string","display":true,"required":false,"displayName":"City","defaultMatch":false,"canBeUsedToMatch":true},{"id":"State","type":"string","display":true,"required":false,"displayName":"State","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Country","type":"string","display":true,"required":false,"displayName":"Country","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Industry","type":"string","display":true,"required":false,"displayName":"Industry","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Google Review","type":"string","display":true,"required":false,"displayName":"Google Review","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Rating","type":"string","display":true,"required":false,"displayName":"Rating","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Keywords","type":"string","display":true,"required":false,"displayName":"Keywords","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Language","type":"string","display":true,"required":false,"displayName":"Language","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Address","type":"string","display":true,"required":false,"displayName":"Address","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Founded Year","type":"string","display":true,"required":false,"displayName":"Founded Year","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Social Media","type":"string","display":true,"required":false,"displayName":"Social Media","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Phone Source","type":"string","display":true,"required":false,"displayName":"Phone Source","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Title","type":"string","display":true,"required":false,"displayName":"Title","defaultMatch":false,"canBeUsedToMatch":true},{"id":"H1","type":"string","display":true,"required":false,"displayName":"H1","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Meta Description","type":"string","display":true,"required":false,"displayName":"Meta Description","defaultMatch":false,"canBeUsedToMatch":true},{"id":"New Name","type":"string","display":true,"removed":false,"required":false,"displayName":"New Name","defaultMatch":false,"canBeUsedToMatch":true},{"id":"New Company","type":"string","display":true,"removed":false,"required":false,"displayName":"New Company","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Personalization 1","type":"string","display":true,"removed":false,"required":false,"displayName":"Personalization 1","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Personalization 2","type":"string","display":true,"removed":false,"required":false,"displayName":"Personalization 2","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Created_at","type":"string","display":true,"removed":false,"required":false,"displayName":"Created_at","defaultMatch":false,"canBeUsedToMatch":true}],"mappingMode":"defineBelow","matchingColumns":[],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{"useAppend":true},"operation":"append","sheetName":{"__rl":true,"mode":"list","value":"gid=0","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1KHe9AoxR3sgI9-AtqD9mgzcC70MBmzeO368gKkB_nOc/edit#gid=0","cachedResultName":"Sheet1"},"documentId":{"__rl":true,"mode":"list","value":"1KHe9AoxR3sgI9-AtqD9mgzcC70MBmzeO368gKkB_nOc","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1KHe9AoxR3sgI9-AtqD9mgzcC70MBmzeO368gKkB_nOc/edit?usp=drivesdk","cachedResultName":"+2 Email"}},"typeVersion":4.7},{"id":"aa57b6fa-547c-464f-b63e-1ff11ee69b05","name":"Website Scrapping Error","type":"n8n-nodes-base.set","position":[-784,-960],"parameters":{"options":{},"assignments":{"assignments":[{"id":"7cba57d4-9a16-4377-a7da-7443c66792c1","name":"Title","type":"string","value":""},{"id":"ab779ce1-7fe2-427e-939d-9fb1626692d8","name":"Meta Description","type":"string","value":""},{"id":"f84960d8-2df7-4a3c-9a66-e1af1c9c84df","name":"H1","type":"string","value":""},{"id":"c7079348-245f-4494-b2db-ce02367c1bb1","name":"is_valid_mail","type":"boolean","value":false}]}},"typeVersion":3.4},{"id":"ba7e9b89-f04b-4ca3-b091-7bd66ca4264a","name":"Set empty if not available","type":"n8n-nodes-base.set","position":[-560,-1312],"parameters":{"options":{},"assignments":{"assignments":[{"id":"19cc3011-6+1234567890e97-a58d4697bf21","name":"Title","type":"string","value":"={{ $json.Title || \"\" }}"},{"id":"cf104ca9-358e-47c4-8dc9-d9b5d1517b74","name":"Meta Description","type":"string","value":"={{ $json[\"Meta Description\"] || \"\" }}"},{"id":"9bf3a31a-b69e-4d13-9d6e-d9cfed3175bf","name":"H1","type":"string","value":"={{ $json[\"H1\"] || \"\" }}"}]}},"typeVersion":3.4},{"id":"f0125fcd-6e02-4e26-86db-d148036a96ad","name":"Email found or not","type":"n8n-nodes-base.if","position":[-576,-1120],"parameters":{"options":{},"conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"combinator":"and","conditions":[{"id":"045ec014-f7ed-46c5-94c7-728e8813a6f6","operator":{"type":"boolean","operation":"false","singleValue":true},"leftValue":"={{ $json.emails.length > 0  }}","rightValue":""}]}},"typeVersion":2.2},{"id":"44f4d51e-61a1-4510-b9cb-958a091ce314","name":"Tag & Attribute Error","type":"n8n-nodes-base.set","position":[-368,-1280],"parameters":{"options":{},"assignments":{"assignments":[{"id":"7cba57d4-9a16-4377-a7da-7443c66792c1","name":"Title","type":"string","value":""},{"id":"ab779ce1-7fe2-427e-939d-9fb1626692d8","name":"Meta Description","type":"string","value":""},{"id":"bf7b544e-8318-4016-b494-16f1e2e7e889","name":"H1","type":"string","value":""}]}},"typeVersion":3.4},{"id":"613dc575-2465-46c4-8fbe-834644a3d810","name":"Send Email found Data","type":"n8n-nodes-base.set","position":[-192,-1136],"parameters":{"options":{},"assignments":{"assignments":[{"id":"4fade1be-d8f5-482d-a102-ce84be727869","name":"is_valid_mail","type":"boolean","value":false}]}},"typeVersion":3.4},{"id":"cfc8b77e-5969-4f85-80c7-ef6f2c81926d","name":"Verify","type":"n8n-nodes-base.httpRequest","position":[32,-848],"parameters":{"url":"=https://emailverifier.reoon.com/api/v1/verify?email={{ $json.message.content.trim() }}&key=<key>&mode=power","options":{}},"typeVersion":4.2},{"id":"cc214121-3322-4d17-a75c-2586c956d7b5","name":"Right or Wrong","type":"n8n-nodes-base.if","position":[32,-1008],"parameters":{"options":{},"conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"loose"},"combinator":"and","conditions":[{"id":"90e8a3ba-8318-4ee9-af17-51c5ac68fd30","operator":{"type":"boolean","operation":"true","singleValue":true},"leftValue":"={{ $json.is_deliverable }}","rightValue":""},{"id":"7e2d6595-0d7e-4571-81d3-ab615465df98","operator":{"type":"boolean","operation":"true","singleValue":true},"leftValue":"={{ $json.can_connect_smtp }}","rightValue":""},{"id":"61e8d98b-ea12-4c00-8a29-0f2da87a2390","operator":{"type":"boolean","operation":"true","singleValue":true},"leftValue":"={{ $json.is_safe_to_send }}","rightValue":""},{"id":"b6ea75fa-d70c-4687-967b-36955e23591c","operator":{"type":"boolean","operation":"true","singleValue":true},"leftValue":"={{ $json.mx_accepts_mail }}","rightValue":""}]},"looseTypeValidation":true},"typeVersion":2.2},{"id":"874166fb-2901-42e1-9e37-1db859b45fcd","name":"Web Scrap Loop","type":"n8n-nodes-base.splitInBatches","position":[-1104,-1520],"parameters":{"options":{}},"typeVersion":3},{"id":"9827d09d-0afc-4111-94e4-03983c80de23","name":"Attribute Merge","type":"n8n-nodes-base.merge","position":[320,-1296],"parameters":{"mode":"combine","options":{},"combineBy":"combineAll"},"typeVersion":3.2},{"id":"1f409814-4560-434e-b481-ffaf6e99a441","name":"Send New Email","type":"n8n-nodes-base.set","position":[320,-1024],"parameters":{"options":{},"assignments":{"assignments":[{"id":"a366eccd-f1ce-43b8-bc43-a83d35717438","name":"New Email","type":"string","value":"={{ $json.email }}"},{"id":"aad26d3e-339b-4681-aa34-10d67c0fab62","name":"is_valid_mail","type":"boolean","value":true}]}},"typeVersion":3.4},{"id":"1393741b-85f7-4eee-9948-4beaaf10afb7","name":"Email is Wrong","type":"n8n-nodes-base.set","position":[320,-832],"parameters":{"options":{},"assignments":{"assignments":[{"id":"acb5e217-927a-4b28-bdf3-f6b60f5fff88","name":"is_valid_mail","type":"boolean","value":false}]}},"typeVersion":3.4},{"id":"6fe1ff60-4c70-4968-bf7e-6ca41c512e7c","name":"Processed Data Merge","type":"n8n-nodes-base.merge","position":[992,-1552],"parameters":{},"typeVersion":3.2},{"id":"31ce3877-9014-4ade-b313-7d45363e4346","name":"No Website Loop","type":"n8n-nodes-base.splitInBatches","position":[1936,-2640],"parameters":{"options":{}},"typeVersion":3},{"id":"7ff28d31-154a-4dd6-a15e-31bedba4c61f","name":"Verify.","type":"n8n-nodes-base.httpRequest","position":[2144,-2384],"parameters":{"url":"=https://emailverifier.reoon.com/api/v1/verify?email={{ $json['Email'].trim() }}&key=<key>&mode=power","options":{}},"typeVersion":4.2},{"id":"f2bd9edd-2133-4ce1-a83d-0cec165efee7","name":"Right or Wrong.","type":"n8n-nodes-base.if","position":[2320,-2480],"parameters":{"options":{},"conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"loose"},"combinator":"and","conditions":[{"id":"90e8a3ba-8318-4ee9-af17-51c5ac68fd30","operator":{"type":"boolean","operation":"true","singleValue":true},"leftValue":"={{ $json.is_deliverable }}","rightValue":""},{"id":"7e2d6595-0d7e-4571-81d3-ab615465df98","operator":{"type":"boolean","operation":"true","singleValue":true},"leftValue":"={{ $json.can_connect_smtp }}","rightValue":""},{"id":"61e8d98b-ea12-4c00-8a29-0f2da87a2390","operator":{"type":"boolean","operation":"true","singleValue":true},"leftValue":"={{ $json.is_safe_to_send }}","rightValue":""},{"id":"b6ea75fa-d70c-4687-967b-36955e23591c","operator":{"type":"boolean","operation":"true","singleValue":true},"leftValue":"={{ $json.mx_accepts_mail }}","rightValue":""}]},"looseTypeValidation":true},"typeVersion":2.2},{"id":"b3246f77-7abb-403f-84ad-f5aef388f7b7","name":"Email exist or not","type":"n8n-nodes-base.if","position":[1936,-2256],"parameters":{"options":{},"conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"combinator":"and","conditions":[{"id":"0b8fbad1-fa2d-4490-ae74-8bc5d6e3e359","operator":{"type":"string","operation":"notEquals"},"leftValue":"={{ $json[\"Email\"] }}","rightValue":"={{ \"-\" }}"}]}},"typeVersion":2.2},{"id":"7c4f79fe-2565-4039-ada3-124dff83ab89","name":"Set invalid Email","type":"n8n-nodes-base.set","position":[2512,-2240],"parameters":{"options":{},"assignments":{"assignments":[{"id":"b1d6bfb1-9e07-42d9-8bdf-52b8dd648896","name":"is_valid_mail","type":"boolean","value":false}]}},"typeVersion":3.4},{"id":"6dbbf82d-1704-45a1-b204-d8471441c1c4","name":"Set invalid Email.","type":"n8n-nodes-base.set","position":[2512,-2400],"parameters":{"options":{},"assignments":{"assignments":[{"id":"b1d6bfb1-9e07-42d9-8bdf-52b8dd648896","name":"is_valid_mail","type":"boolean","value":false}]}},"typeVersion":3.4},{"id":"70ea9f31-bdbb-458c-8f59-4ef40f05b185","name":"Set Valid Email","type":"n8n-nodes-base.set","position":[2512,-2560],"parameters":{"options":{},"assignments":{"assignments":[{"id":"2048f433-d61e-4849-8b94-9a220fc9ad8d","name":"is_valid_mail","type":"boolean","value":true}]}},"typeVersion":3.4},{"id":"59a5822f-1318-4f4d-9f7f-843fa675ecc6","name":"No Website Merge","type":"n8n-nodes-base.merge","position":[2768,-2608],"parameters":{"mode":"combine","options":{},"combineBy":"combineAll"},"typeVersion":3.2},{"id":"6f11b8ad-756c-4360-95f0-81f6a1e39980","name":"Set AI Response","type":"n8n-nodes-base.set","position":[1728,224],"parameters":{"options":{},"assignments":{"assignments":[{"id":"acca55bd-9896-48d9-95af-5c050849f8d6","name":"New Name","type":"string","value":"={{ $json.output[\"New Name\"] }}"},{"id":"9b793e66-c964-4d3c-b253-0150f7531e9f","name":"New Company","type":"string","value":"={{ $json.output[\"New Company\"] }}"},{"id":"140fd3ef-7716-4867-93f9-c8839d5e0a07","name":"Personalization 1","type":"string","value":"={{ $json.output[\"Personalization 1\"] }}"},{"id":"d8d80f48-b0bb-4f33-a1a9-008fcde54c11","name":"Personalization 2","type":"string","value":"={{ $json.output[\"Personalization 2\"] }}"}]}},"typeVersion":3.4},{"id":"dc45dd71-0e80-473f-be05-c847398675ad","name":"Find One Correct mail..","type":"@n8n/n8n-nodes-langchain.openAi","position":[-304,-848],"parameters":{"modelId":{"__rl":true,"mode":"list","value":"gpt-5-nano","cachedResultName":"GPT-5-NANO"},"options":{},"messages":{"values":[{"content":"=Find Only one Correct Email address.\n\nInput : {{ $json.emails }}\n\nOutput Format:\nreturn only single email nothing other stuff like \\n, \\ etx."}]}},"typeVersion":1.8},{"id":"25aed3af-1f59-41f6-a766-1f1bac46b961","name":"+1: Replace with \"-\"","type":"n8n-nodes-base.code","position":[3248,-432],"parameters":{"jsCode":"// Iterate over all incoming items\nreturn items.map(item => {\n  const newJson = {};\n\n  // Loop through each field in the current item\n  for (const key in item.json) {\n    if (item.json.hasOwnProperty(key)) {\n      const value = item.json[key];\n\n      // Replace empty string, null, or undefined with \"-\"\n      if (value === \"\" || value === null || value === undefined) {\n        newJson[key] = \"-\";\n      } else {\n        newJson[key] = value;\n      }\n    }\n  }\n\n  return { json: newJson };\n});\n"},"typeVersion":2},{"id":"3fbf61f8-83e3-42cc-ad2b-a41ef69a2151","name":"+2: Replace with \"-\"","type":"n8n-nodes-base.code","position":[2784,-352],"parameters":{"jsCode":"// Iterate over all incoming items\nreturn items.map(item => {\n  const newJson = {};\n\n  // Loop through each field in the current item\n  for (const key in item.json) {\n    if (item.json.hasOwnProperty(key)) {\n      const value = item.json[key];\n\n      // Replace empty string, null, or undefined with \"-\"\n      if (value === \"\" || value === null || value === undefined) {\n        newJson[key] = \"-\";\n      } else {\n        newJson[key] = value;\n      }\n    }\n  }\n\n  return { json: newJson };\n});\n"},"typeVersion":2},{"id":"f33ebdb5-dd68-48a0-976f-be0d01276f42","name":"Convert to File.","type":"n8n-nodes-base.convertToFile","position":[1088,-2528],"parameters":{"options":{},"operation":"xlsx"},"typeVersion":1.1},{"id":"1257f42c-6fee-45cf-8c25-ab86ff0c647c","name":"Send a Success Message","type":"n8n-nodes-base.gmail","position":[4144,-352],"webhookId":"d727c378-b66c-4108-b8f0-fb46afa2e517","parameters":{"sendTo":"user@example.com","message":"=Hello,\n\nYour data processing is completed, open with below links:\n\n+1 Email:\nhttps://docs.google.com/spreadsheets/d/1VJ3OxQh806yQoFqch9ZSN3wPoHiMtX17le-o5qe1x0Y\n\n+2 Email:\nhttps://docs.google.com/spreadsheets/d/1KHe9AoxR3sgI9-AtqD9mgzcC70MBmzeO368gKkB_nOc\n\nThanks,\nVekrro Automation","options":{"senderName":"Vekrro","appendAttribution":false},"subject":"âš¡LQ:  Data Processing is Completed","emailType":"text"},"typeVersion":2.1},{"id":"02882e23-1fd8-4009-83a9-7da18ec8293e","name":"Limit","type":"n8n-nodes-base.limit","position":[3952,-352],"parameters":{},"typeVersion":1},{"id":"047e70eb-ff26-46bc-b4bb-2d288707467b","name":"- Website +- Email +- Phone Number","type":"n8n-nodes-base.googleSheets","position":[2960,-2608],"parameters":{"columns":{"value":{"City":"={{ $json.City }}","Name":"={{ $json.Name }}","Email":"={{ $json.Email }}","State":"={{ $json.State }}","Rating":"={{ $json.Rating }}","Address":"={{ $json.Address }}","Company":"={{ $json.Company }}","Country":"={{ $json.Country }}","Website":"={{ $json.Website }}","Industry":"={{ $json.Industry }}","Keywords":"={{ $json.Keywords }}","Language":"={{ $json.Languages }}","LinkedIn":"={{ $json.LinkedIn }}","Job Title":"={{ $json[\"Job Title\"] }}","Last Name":"={{ $json[\"Last Name\"] }}","First Name":"={{ $json[\"First Name\"] }}","Founded Year":"={{ $json[\"Founded Year\"] }}","Phone Number":"={{ $json[\"Phone Number\"] }}","Phone Source":"={{ $json[\"Phone Source\"] }}","Social Media":"={{ $json[\"Social Media\"] }}","Google Review":"={{ $json[\"Google Review\"] }}","is_valid_mail":"={{ $json[\"is_valid_mail\"] }}","Personal Email":"={{ $json[\"Personal Email\"] }}","Company Facebook":"={{ $json[\"Company Facebook\"] }}","Company LinkedIn":"={{ $json[\"Company LinkedIn\"] }}"},"schema":[{"id":"Name","type":"string","display":true,"required":false,"displayName":"Name","defaultMatch":false,"canBeUsedToMatch":true},{"id":"First Name","type":"string","display":true,"removed":false,"required":false,"displayName":"First Name","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Last Name","type":"string","display":true,"removed":false,"required":false,"displayName":"Last Name","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Email","type":"string","display":true,"removed":false,"required":false,"displayName":"Email","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Personal Email","type":"string","display":true,"removed":false,"required":false,"displayName":"Personal Email","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Phone Number","type":"string","display":true,"removed":false,"required":false,"displayName":"Phone Number","defaultMatch":false,"canBeUsedToMatch":true},{"id":"LinkedIn","type":"string","display":true,"removed":false,"required":false,"displayName":"LinkedIn","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Job Title","type":"string","display":true,"removed":false,"required":false,"displayName":"Job Title","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Website","type":"string","display":true,"required":false,"displayName":"Website","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Company","type":"string","display":true,"removed":false,"required":false,"displayName":"Company","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Company LinkedIn","type":"string","display":true,"removed":false,"required":false,"displayName":"Company LinkedIn","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Company Facebook","type":"string","display":true,"removed":false,"required":false,"displayName":"Company Facebook","defaultMatch":false,"canBeUsedToMatch":true},{"id":"City","type":"string","display":true,"removed":false,"required":false,"displayName":"City","defaultMatch":false,"canBeUsedToMatch":true},{"id":"State","type":"string","display":true,"removed":false,"required":false,"displayName":"State","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Country","type":"string","display":true,"removed":false,"required":false,"displayName":"Country","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Industry","type":"string","display":true,"removed":false,"required":false,"displayName":"Industry","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Google Review","type":"string","display":true,"removed":false,"required":false,"displayName":"Google Review","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Rating","type":"string","display":true,"removed":false,"required":false,"displayName":"Rating","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Keywords","type":"string","display":true,"removed":false,"required":false,"displayName":"Keywords","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Language","type":"string","display":true,"removed":false,"required":false,"displayName":"Language","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Address","type":"string","display":true,"removed":false,"required":false,"displayName":"Address","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Founded Year","type":"string","display":true,"removed":false,"required":false,"displayName":"Founded Year","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Social Media","type":"string","display":true,"removed":false,"required":false,"displayName":"Social Media","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Phone Source","type":"string","display":true,"removed":false,"required":false,"displayName":"Phone Source","defaultMatch":false,"canBeUsedToMatch":true},{"id":"is_valid_mail","type":"string","display":true,"removed":false,"required":false,"displayName":"is_valid_mail","defaultMatch":false,"canBeUsedToMatch":true}],"mappingMode":"defineBelow","matchingColumns":[],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{"useAppend":true},"operation":"append","sheetName":{"__rl":true,"mode":"list","value":"gid=0","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1vmtaV8pDzPBKht68ApC3KeLjqX2IgIBemYhlh3dIdfQ/edit#gid=0","cachedResultName":"Sheet1"},"documentId":{"__rl":true,"mode":"list","value":"1vmtaV8pDzPBKht68ApC3KeLjqX2IgIBemYhlh3dIdfQ","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1vmtaV8pDzPBKht68ApC3KeLjqX2IgIBemYhlh3dIdfQ/edit?usp=drivesdk","cachedResultName":"- Website +- Email +- Phone Number"}},"typeVersion":4.7},{"id":"f3a9100f-ebb0-4ccd-86df-9085f3b77882","name":"OpenAI Chat Model","type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","position":[1264,256],"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-5-nano","cachedResultName":"gpt-5-nano"},"options":{}},"typeVersion":1.2},{"id":"e11acf3d-2de2-4fe4-935e-519eb4f0ca9c","name":"E: Verify Backup","type":"n8n-nodes-base.httpRequest","position":[1680,-1472],"parameters":{"url":"=https://emailverifier.reoon.com/api/v1/verify?email={{ $json['Email'].trim() }}&key=<key>&mode=power","options":{}},"typeVersion":4.2},{"id":"8bcef928-aae1-4d91-adee-0dc5ea25e18f","name":"x Website Data","type":"n8n-nodes-base.googleSheets","position":[1216,-2144],"parameters":{"columns":{"value":{"City":"={{ $json.City }}","Name":"={{ $json.Name }}","Email":"={{ $json.Email }}","State":"={{ $json.State }}","Rating":"={{ $json.Rating }}","Address":"={{ $json.Address }}","Company":"={{ $json.Company }}","Country":"={{ $json.Country }}","Website":"={{ $json.Website }}","Industry":"={{ $json.Industry }}","Keywords":"={{ $json.Keywords }}","Language":"={{ $json.Languages }}","LinkedIn":"={{ $json.LinkedIn }}","Job Title":"={{ $json[\"Job Title\"] }}","Last Name":"={{ $json[\"Last Name\"] }}","Created_at":"={{ $now.format('dd LLL yyyy | HH:mm') }}","First Name":"={{ $json[\"First Name\"] }}","Founded Year":"={{ $json[\"Founded Year\"] }}","Phone Number":"={{ $json[\"Phone Number\"] }}","Phone Source":"={{ $json[\"Phone Source\"] }}","Social Media":"={{ $json[\"Social Media\"] }}","Google Review":"={{ $json[\"Google Review\"] }}","Personal Email":"={{ $json[\"Personal Email\"] }}","Company Facebook":"={{ $json[\"Company Facebook\"] }}","Company LinkedIn":"={{ $json[\"Company LinkedIn\"] }}"},"schema":[{"id":"Name","type":"string","display":true,"removed":false,"required":false,"displayName":"Name","defaultMatch":false,"canBeUsedToMatch":true},{"id":"First Name","type":"string","display":true,"removed":false,"required":false,"displayName":"First Name","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Last Name","type":"string","display":true,"removed":false,"required":false,"displayName":"Last Name","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Email","type":"string","display":true,"removed":false,"required":false,"displayName":"Email","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Personal Email","type":"string","display":true,"removed":false,"required":false,"displayName":"Personal Email","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Phone Number","type":"string","display":true,"removed":false,"required":false,"displayName":"Phone Number","defaultMatch":false,"canBeUsedToMatch":true},{"id":"LinkedIn","type":"string","display":true,"removed":false,"required":false,"displayName":"LinkedIn","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Job Title","type":"string","display":true,"removed":false,"required":false,"displayName":"Job Title","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Website","type":"string","display":true,"removed":false,"required":false,"displayName":"Website","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Company","type":"string","display":true,"removed":false,"required":false,"displayName":"Company","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Company LinkedIn","type":"string","display":true,"removed":false,"required":false,"displayName":"Company LinkedIn","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Company Facebook","type":"string","display":true,"removed":false,"required":false,"displayName":"Company Facebook","defaultMatch":false,"canBeUsedToMatch":true},{"id":"City","type":"string","display":true,"removed":false,"required":false,"displayName":"City","defaultMatch":false,"canBeUsedToMatch":true},{"id":"State","type":"string","display":true,"removed":false,"required":false,"displayName":"State","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Country","type":"string","display":true,"removed":false,"required":false,"displayName":"Country","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Industry","type":"string","display":true,"removed":false,"required":false,"displayName":"Industry","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Google Review","type":"string","display":true,"removed":false,"required":false,"displayName":"Google Review","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Rating","type":"string","display":true,"removed":false,"required":false,"displayName":"Rating","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Keywords","type":"string","display":true,"removed":false,"required":false,"displayName":"Keywords","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Language","type":"string","display":true,"removed":false,"required":false,"displayName":"Language","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Address","type":"string","display":true,"removed":false,"required":false,"displayName":"Address","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Founded Year","type":"string","display":true,"removed":false,"required":false,"displayName":"Founded Year","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Social Media","type":"string","display":true,"removed":false,"required":false,"displayName":"Social Media","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Phone Source","type":"string","display":true,"removed":false,"required":false,"displayName":"Phone Source","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Created_at","type":"string","display":true,"removed":false,"required":false,"displayName":"Created_at","defaultMatch":false,"canBeUsedToMatch":true}],"mappingMode":"defineBelow","matchingColumns":[],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{"useAppend":true},"operation":"append","sheetName":{"__rl":true,"mode":"list","value":"gid=0","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1t447EMkE_2TxZIL-Wr97e2LNS-oGcBpPxWYfnZRziWE/edit#gid=0","cachedResultName":"Sheet1"},"documentId":{"__rl":true,"mode":"list","value":"1t447EMkE_2TxZIL-Wr97e2LNS-oGcBpPxWYfnZRziWE","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1t447EMkE_2TxZIL-Wr97e2LNS-oGcBpPxWYfnZRziWE/edit?usp=drivesdk","cachedResultName":"x Website"}},"typeVersion":4.7},{"id":"5d04bca0-5db8-4ab0-84e3-c3ce37973727","name":"Sticky Note","type":"n8n-nodes-base.stickyNote","position":[912,-512],"parameters":{"color":4,"width":3536,"height":1008,"content":"## Personalize Message & Data Sorting"},"typeVersion":1},{"id":"5e1f5357-880d-4987-845f-d184be3cc3ef","name":"Sticky Note8","type":"n8n-nodes-base.stickyNote","position":[1808,-2768],"parameters":{"color":4,"width":1424,"height":752,"content":"## Website not exist but Email exist"},"typeVersion":1},{"id":"847940e6-a0b7-4fea-b56f-3c93990b3b0b","name":"Sticky Note9","type":"n8n-nodes-base.stickyNote","position":[1088,-2240],"parameters":{"color":4,"width":352,"height":288,"content":"## Website & Email not exist"},"typeVersion":1},{"id":"51975605-4773-4b65-9be6-512929ca466c","name":"Sticky Note10","type":"n8n-nodes-base.stickyNote","position":[992,-2624],"parameters":{"color":5,"width":512,"height":288,"content":"## Send Filtered Data to WhatsApp"},"typeVersion":1},{"id":"393a772a-cb7a-4d0f-b5e7-a69875fd7a83","name":"Sticky Note11","type":"n8n-nodes-base.stickyNote","position":[992,-2992],"parameters":{"color":5,"width":672,"height":288,"content":"## Save Filtered Data into Google Drive"},"typeVersion":1},{"id":"9014698a-b429-4af5-852e-cc78bdd8d997","name":"Sticky Note12","type":"n8n-nodes-base.stickyNote","position":[-384,-2576],"parameters":{"color":6,"width":1072,"height":560,"content":"## Filter & Formitize Data"},"typeVersion":1},{"id":"c67b3fff-99ec-4fa6-a0bf-f68f1c268056","name":"Sticky Note1","type":"n8n-nodes-base.stickyNote","position":[1248,-1872],"parameters":{"color":2,"width":2672,"height":1328,"content":"##  If Website & Email both exist"},"typeVersion":1},{"id":"8fc5a493-f808-4458-9569-a3daf7e54267","name":"Sticky Note2","type":"n8n-nodes-base.stickyNote","position":[-2720,-2768],"parameters":{"width":944,"height":2736,"content":"# CSV Lead Qualification & Email Enrichment Workflow\n\nThis automated n8n workflow transforms raw CSV data into qualified, enriched lead databases with verified emails and AI-generated personalization. It processes uploaded CSV files through multiple validation, enrichment, and sorting stages before delivering organized results via Google Drive, WhatsApp, or Google Sheets.\n\n# How It Works\n\n## Processing Pipeline\n\n### Stage 1: Data Intake & Normalization\n1. **Form Submission**: User uploads a CSV/XLSX file and selects:\n   - Delivery method (Google Drive, WhatsApp, or Google Sheets with processing)\n   - Two personalization prompts for AI-generated messages\n2. **Column Mapping**: The workflow automatically recognizes and standardizes 100+ column name variations into consistent fields\n3. **Deduplication**: Removes duplicate entries by website URL and contact name\n4. **Initial Filtering**: Identifies and flags invalid websites (social media profiles, link shorteners)\n\n### Stage 2: Data Quality Routing\nThe workflow analyzes each record and routes it based on available data:\n\n**Route A: Invalid Website** â†’ Sends directly to \"x Website\" sheet\n\n**Route B: No Website** â†’ Verifies existing email and categorizes by validity\n\n**Route C: Valid Website + Email** â†’ Proceeds to email verification and enrichment\n\n**Route D: Valid Website - Email** â†’ Scrapes website to find email addresses\n\n### Stage 3: Email Discovery & Verification\nFor records needing enrichment:\n1. **Website Scraping**: Fetches HTML content from company websites\n2. **Email Extraction**: Uses regex patterns to identify email addresses\n3. **AI Selection**: GPT-5-NANO chooses the most relevant email from multiple options\n4. **Dual Verification**: \n   - Primary check via Reoon API (deliverability, SMTP, safety)\n   - Backup verification if primary fails\n5. **Personal Email Processing**: Separately validates personal emails when present\n\n### Stage 4: Website Intelligence Gathering\nParallel to email processing:\n- Extracts HTML title tags for company context\n- Captures meta descriptions for business understanding\n- Pulls H1 headings for content insight\n- Handles scraping failures gracefully with empty placeholders\n\n### Stage 5: Email Categorization Logic\nRecords are sorted into buckets:\n- **+1 Email**: Has exactly one verified email (business OR personal OR newly found)\n- **+2 Email**: Has two or more verified emails\n- **Single Source Records**: Only business email OR only personal email\n\n### Stage 6: AI Personalization\nFor records with verified emails:\n1. **Context Assembly**: Combines name, company, job title, website metadata, industry, keywords\n2. **AI Processing**: Sends to GPT-5-NANO or Gemini with user's custom prompts\n3. **Structured Output**: Generates:\n   - Cleaned contact name\n   - Shortened company name\n   - Personalization message 1 (per user prompt)\n   - Personalization message 2 (per user prompt)\n\n### Stage 7: Final Delivery\nBased on user's initial selection:\n- **Google Drive**: Uploads timestamped CSV, sends email with link\n- **WhatsApp**: Converts to XLSX and sends document\n- **Google Sheets**: Populates separate sheets by category with completion email\n\n---\n\n# How To Use\n\n## Prerequisites\n- Active n8n instance with required credentials:\n  - Google Drive API access\n  - Google Sheets API access\n  - Gmail API access (for notifications)\n  - WhatsApp Business API credentials\n  - Reoon Email Verifier API keys\n  - OpenAI API key (GPT-5-NANO)\n  - Optional: Google Gemini API key\n\n## Setup Steps\n\n### 1. Configure Google Sheets Destinations\nCreate or use existing Google Sheets for data categorization:\n- **+1 Email Sheet**: Update document ID in \"+1 Email\" node\n- **+2 Email Sheet**: Update document ID in \"+2 Email\" node\n- **x Website Sheet**: Update document ID in \"x Website Data\" node\n- **No Website Sheet**: Update document ID in \"- Website +- Email +- Phone Number\" node\n\nEnsure all sheets have matching column headers as defined in the workflow.\n\n### 2. Set Up Google Drive Folder\n- Create a destination folder in Google Drive\n- Update the folder ID in the \"Upload file\" node\n- Ensure the service account has write permissions\n\n### 3. Configure WhatsApp\n- Add your WhatsApp Business Phone Number ID in the \"Send CSV\" node\n- Update the recipient phone number (format: +[country code][number])\n\n### 4. Customize Email Notifications\n- Update sender and recipient emails in \"Send a message\" and \"Send a Success Message\" nodes\n- Modify email templates as needed\n\n### 5. Verify API Keys\nCheck that all API credentials are active:\n- Reoon Email Verifier keys (two instances for redundancy)\n- OpenAI API key for GPT-5-NANO\n- All Google API credentials"},"typeVersion":1}],"pinData":{},"connections":{"Code":{"main":[[{"node":"CSV Loop","type":"main","index":0}]]},"Loop":{"main":[[{"node":"Processed Data Merge","type":"main","index":0}],[{"node":"E: Merge","type":"main","index":0},{"node":"E: exist or not","type":"main","index":0},{"node":"PR: Exist or not","type":"main","index":0}]]},"Limit":{"main":[[{"node":"Send a Success Message","type":"main","index":0}]]},"Merge":{"main":[[{"node":"Web Scrap Loop","type":"main","index":0}]]},"5 nano":{"ai_languageModel":[[{"node":"Personalize Message","type":"ai_languageModel","index":0}]]},"Verify":{"main":[[{"node":"Right or Wrong","type":"main","index":0}]]},"Verify.":{"main":[[{"node":"Right or Wrong.","type":"main","index":0}]]},"+1 Email":{"main":[[{"node":"Limit","type":"main","index":0}]]},"+2 Email":{"main":[[{"node":"Limit","type":"main","index":0}]]},"CSV Loop":{"main":[[{"node":"Remove Duplicate Websites","type":"main","index":0}],[{"node":"Extract from File","type":"main","index":0}]]},"E: Merge":{"main":[[{"node":"Full Merge","type":"main","index":0}]]},"P: Merge":{"main":[[{"node":"Personalization Loop","type":"main","index":0}]]},"B: Gemini":{"ai_languageModel":[[{"node":"Personalize Message","type":"ai_languageModel","index":1}]]},"E: Verify":{"main":[[{"node":"E: Right or Wrong","type":"main","index":0}],[{"node":"E: Verify Backup","type":"main","index":0}]]},"WP: Merge":{"main":[[{"node":"E: Merge","type":"main","index":1}]]},"Full Merge":{"main":[[{"node":"Loop","type":"main","index":0}]]},"PE: Verify":{"main":[[{"node":"PE: Send Data","type":"main","index":0}]]},"WE: Verify":{"main":[[{"node":"WE: Right or Wrong","type":"main","index":0}]]},"Upload file":{"main":[[{"node":"Send a message","type":"main","index":0}]]},"Email Switch":{"main":[[{"node":"Rename New Email Keys","type":"main","index":0}],[{"node":"+1 Email Merge","type":"main","index":1}],[{"node":"Rename PE Keys","type":"main","index":0}],[{"node":"+2 Email Merge","type":"main","index":0}],[{"node":"Rename PE + New Email Keys","type":"main","index":0}]]},"HTTP Request":{"main":[[{"node":"Extract Website Details","type":"main","index":0},{"node":"Extract Tag & Attributee","type":"main","index":0}],[{"node":"Website Scrapping Error","type":"main","index":0}]]},"Output Parser":{"ai_outputParser":[[{"node":"Personalize Message","type":"ai_outputParser","index":0}]]},"PE: Not Exist":{"main":[[{"node":"Full Merge","type":"main","index":1}]]},"PE: Send Data":{"main":[[{"node":"Full Merge","type":"main","index":1}]]},"Replace Value":{"main":[[{"node":"CSV Loop","type":"main","index":0}]]},"+1 Email Merge":{"main":[[{"node":"+1: Replace with \"-\"","type":"main","index":0}]]},"+2 Email Merge":{"main":[[{"node":"+2: Replace with \"-\"","type":"main","index":0}]]},"Email is Wrong":{"main":[[{"node":"Attribute Merge","type":"main","index":1}]]},"Rename PE Keys":{"main":[[{"node":"+1 Email Merge","type":"main","index":2}]]},"Right or Wrong":{"main":[[{"node":"Send New Email","type":"main","index":0}],[{"node":"Email is Wrong","type":"main","index":0}]]},"Send New Email":{"main":[[{"node":"Attribute Merge","type":"main","index":1}]]},"Send to Switch":{"main":[[{"node":"Convert to File","type":"main","index":0}],[{"node":"Convert to File.","type":"main","index":0}],[{"node":"Detect Wrong Website URLs ","type":"main","index":0}]]},"Web Scrap Loop":{"main":[[{"node":"Processed Data Merge","type":"main","index":1}],[{"node":"HTTP Request","type":"main","index":0},{"node":"Merge","type":"main","index":0}]]},"Attribute Merge":{"main":[[{"node":"Merge","type":"main","index":1}]]},"Convert to File":{"main":[[{"node":"Upload file","type":"main","index":0}]]},"E: exist or not":{"main":[[{"node":"E: Verify","type":"main","index":0}],[{"node":"E: Email not exist","type":"main","index":0}]]},"No Website Loop":{"main":[[],[{"node":"Email exist or not","type":"main","index":0},{"node":"No Website Merge","type":"main","index":0}]]},"Right or Wrong.":{"main":[[{"node":"Set Valid Email","type":"main","index":0}],[{"node":"Set invalid Email.","type":"main","index":0}]]},"Set AI Response":{"main":[[{"node":"P: Merge","type":"main","index":1}]]},"Set Valid Email":{"main":[[{"node":"No Website Merge","type":"main","index":1}]]},"Convert to File.":{"main":[[{"node":"Send CSV","type":"main","index":0}]]},"E: Verify Backup":{"main":[[{"node":"E: Right or Wrong","type":"main","index":0}]]},"No Website Merge":{"main":[[{"node":"- Website +- Email +- Phone Number","type":"main","index":0}]]},"PR: Exist or not":{"main":[[{"node":"PE: Not Exist","type":"main","index":0}],[{"node":"PE: Verify","type":"main","index":0}]]},"E: Right or Wrong":{"main":[[{"node":"E: Scrap Website HTML","type":"main","index":0}],[{"node":"WE: Scrap Website HTML..","type":"main","index":0}]]},"Extract from File":{"main":[[{"node":"Replace Value","type":"main","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"Output Parser","type":"ai_languageModel","index":0}]]},"Set invalid Email":{"main":[[{"node":"No Website Merge","type":"main","index":1}]]},"E: Email not exist":{"main":[[{"node":"E: Merge","type":"main","index":1}]]},"Email exist or not":{"main":[[{"node":"Verify.","type":"main","index":0}],[{"node":"Set invalid Email","type":"main","index":0}]]},"Email found or not":{"main":[[{"node":"Send Email found Data","type":"main","index":0}],[{"node":"Find One Correct mail..","type":"main","index":0}]]},"On form submission":{"main":[[{"node":"Code","type":"main","index":0}]]},"Set invalid Email.":{"main":[[{"node":"No Website Merge","type":"main","index":1}]]},"WE: Email is Wrong":{"main":[[{"node":"WP: Merge","type":"main","index":1}]]},"WE: Right or Wrong":{"main":[[{"node":"WE: Send New Email","type":"main","index":0}],[{"node":"WE: Email is Wrong","type":"main","index":0}]]},"WE: Send New Email":{"main":[[{"node":"WP: Merge","type":"main","index":1}]]},"Personalize Message":{"main":[[{"node":"Set AI Response","type":"main","index":0}]]},"+1: Replace with \"-\"":{"main":[[{"node":"+1 Email","type":"main","index":0}]]},"+2: Replace with \"-\"":{"main":[[{"node":"+2 Email","type":"main","index":0}]]},"E: Seng Process Data":{"main":[[{"node":"E: Merge","type":"main","index":1}]]},"Personalization Loop":{"main":[[{"node":"Email Switch","type":"main","index":0}],[{"node":"Personalize Message","type":"main","index":0},{"node":"P: Merge","type":"main","index":0}]]},"Processed Data Merge":{"main":[[{"node":"Remove No Email Records","type":"main","index":0}]]},"E: Scrap Website HTML":{"main":[[{"node":"E: Extract Tag & Attribute","type":"main","index":0}],[{"node":"E: Website Scrapping Error","type":"main","index":0}]]},"Find One Correct mail":{"main":[[{"node":"WE: Verify","type":"main","index":0}]]},"Remove Duplicate Name":{"main":[[{"node":"Send to Switch","type":"main","index":0}]]},"Rename New Email Keys":{"main":[[{"node":"+1 Email Merge","type":"main","index":0}]]},"Send Email found Data":{"main":[[{"node":"Attribute Merge","type":"main","index":1}]]},"Tag & Attribute Error":{"main":[[{"node":"Attribute Merge","type":"main","index":0}]]},"Data Processing Switch":{"main":[[{"node":"x Website Data","type":"main","index":0}],[{"node":"No Website Loop","type":"main","index":0}],[{"node":"Loop","type":"main","index":0}],[{"node":"Web Scrap Loop","type":"main","index":0}]]},"WE: Email found or not":{"main":[[{"node":"WE: Send Email found Data","type":"main","index":0}],[{"node":"Find One Correct mail","type":"main","index":0}]]},"Extract Website Details":{"main":[[{"node":"Email found or not","type":"main","index":0}]]},"Find One Correct mail..":{"main":[[{"node":"Verify","type":"main","index":0}]]},"Remove No Email Records":{"main":[[{"node":"Personalization Loop","type":"main","index":0}]]},"WE: Scrap Website mails":{"main":[[{"node":"WE: Email found or not","type":"main","index":0}]]},"Website Scrapping Error":{"main":[[{"node":"Merge","type":"main","index":1}]]},"Extract Tag & Attributee":{"main":[[{"node":"Set empty if not available","type":"main","index":0}],[{"node":"Tag & Attribute Error","type":"main","index":0}]]},"WE: Scrap Website HTML..":{"main":[[{"node":"WE: Scrap Website mails","type":"main","index":0},{"node":"WE: Extract Tag & Attributee","type":"main","index":0}],[{"node":"WE: Website Scrapping Error","type":"main","index":0}]]},"Remove Duplicate Websites":{"main":[[{"node":"Remove Duplicate Name","type":"main","index":0}]]},"WE: Send Email found Data":{"main":[[{"node":"WP: Merge","type":"main","index":1}]]},"WE: Tag & Attribute Error":{"main":[[{"node":"WP: Merge","type":"main","index":0}]]},"Detect Wrong Website URLs ":{"main":[[{"node":"Data Processing Switch","type":"main","index":0}]]},"E: Extract Tag & Attribute":{"main":[[{"node":"E: Seng Process Data","type":"main","index":0}]]},"E: Website Scrapping Error":{"main":[[{"node":"E: Merge","type":"main","index":1}]]},"Rename PE + New Email Keys":{"main":[[{"node":"+2 Email Merge","type":"main","index":1}]]},"Set empty if not available":{"main":[[{"node":"Attribute Merge","type":"main","index":0}]]},"WE: Website Scrapping Error":{"main":[[{"node":"E: Merge","type":"main","index":1}]]},"WE: Extract Tag & Attributee":{"main":[[{"node":"WE: Set empty if not available","type":"main","index":0}],[{"node":"WE: Tag & Attribute Error","type":"main","index":0}]]},"WE: Set empty if not available":{"main":[[{"node":"WP: Merge","type":"main","index":0}]]}}}